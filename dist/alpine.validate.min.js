(()=>{var J=function(F){let I="validate",m=(e,t)=>t?e instanceof HTMLElement&&e.matches(t):e instanceof HTMLElement,j='input:not([type="button"]):not([type="search"]):not([type="reset"]):not([type="submit"]),select,textarea',q=e=>m(e,j),W=(e,t)=>typeof e===t,B=e=>e.querySelectorAll(j),C=e=>["checkbox","radio","range"].includes(e.type),x=e=>["checkbox","radio"].includes(e.type),v=(e,t,n)=>e.addEventListener(t,n),M=(e,t)=>e.getAttribute(t),H=(e,t,n="")=>e.setAttribute(t,n),A=e=>W(e,"string")?document.querySelector(`#${e}`):m(e)?e:!1,z=e=>m(A(e),"form")?e:m(A(e))?e.closest("form"):!1;function G(e,t){var n=e.nextElementSibling;return!t||m(n,t)?n:!1}let Z=e=>e.name||M(e,"id"),N=e=>String(e).trim(),V=e=>N(e)==="",p=e=>(e=A(e),data=O[z(e)]||[],m(e,"fieldset")?data.filter(t=>t.set===e):q(e)?data.filter(t=>t.name===Z(e))[0]:data),l=["mmddyyyy","ddmmyyyy","yyyymmdd"];function $(e,t){let[n,i,o]=e.split(/[-\/.]/),s;if(t===l[0]&&/^(\d{1,2})[-\/.](\d{1,2})[-\/.](\d{4})$/.test(e))s=`${o}-${n}-${i}`;else if(t===l[1]&&/^(\d{1,2})[-\/.](\d{1,2})[-\/.](\d{4})$/.test(e))s=`${o}-${i}-${n}`;else if(t===l[2]&&/^(\d{4})[-\/.](\d{1,2})[-\/.](\d{1,2})$/.test(e))s=`${n}-${i}-${o}`;else return!1;let u=new Date(s),w=u.getTime();return typeof w!="number"||Number.isNaN(w)?!1:u.toISOString().startsWith(s)}let O=F.reactive({}),E={};function k(e,t){let n=z(e),i=Z(e);if(t={name:i,node:e,value:e.value,...t},m(n,"form")&&i){let o=p(n);if(o.some(s=>s.name===i)){if(t={...p(e),...t},e.type==="checkbox"){let s=t.array||[];t.value!==""&&(s=s.some(u=>u===e.value)?s.filter(u=>u!==t.value):[...s,t.value]),t={...t,array:s,value:s.toString()}}else t={...t};o=o.map(s=>s.name===i?t:s)}else o.push(t);O[n]=o}}let a={};a.email=e=>/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(N(e)),a.tel=e=>/^[\+]?[(]?[0-9]{3}[)]?[-\s\.]?[0-9]{3}[-\s\.]?[0-9]{4,6}$/.test(N(e)),a.website=e=>/^(https?:\/\/)?(www\.)?([a-zA-Z0-9]+(-?[a-zA-Z0-9])*\.)+[\w]{2,}(\/\S*)?$/.test(N(e)),a.url=e=>/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()!@:%_\+.~#?&\/\/=]*)/.test(N(e)),a.number=e=>!isNaN(parseFloat(e))&&isFinite(e),a.integer=e=>a.number(e)&&Number.isInteger(Number(e)),a.wholenumber=e=>a.integer(e)&&Number(e)>0,a.date=e=>$(e,l[0]),a.date[l[0]]=e=>$(e,l[0]),a.date[l[1]]=e=>$(e,l[1]),a.date[l[2]]=e=>$(e,l[2]);let f={};f.data=e=>p(e),f.updateData=(e,t)=>k(A(e),t),f.toggleError=(e,t,n)=>L(A(e),t,n),f.submit=e=>{p(e.target).forEach(t=>{if(t.valid===!1){let n=t.group?{errorNode:t.node.parentNode.parentNode}:{};L(t.node,!1,n),e.preventDefault(),console.error(`${t.name} not valid`)}})},f.isComplete=e=>!p(e).some(t=>!t.valid),Object.keys(a).forEach(e=>f={...f,[e]:a[e]}),F.magic(I,()=>f),F.directive(I,(e,{modifiers:t,expression:n},{evaluate:i})=>{let o=z(e);E[o]=E[o]||[];let s=[...t,...E[o]],u=(r,g=s)=>g.includes(r),w=r=>u("required")||r.hasAttribute("required")||!1;function R(r,g=!1){return{value:x(r)?"":r.value,valid:!(w(r)||u("group")),mods:s,set:g}}function _(r){r.type==="checkbox"&&u("group")||C(r)?v(r,"click",b):m(r,"select")?v(r,"change",b):(v(r,"blur",b),u("input")&&v(r,"input",b))}if(m(e,"form")){E[o]=t;let r=e.querySelectorAll("fieldset");(r.length>0?r:[e]).forEach(d=>{B(d).forEach(c=>{k(c,R(c,d)),c.getAttributeNames().some(D=>D.includes("x-validate"))||_(c)})})}q(e)&&(k(e,R(e)),_(e));function b(){var D;let r=this,g=p(r),d=[r.type],T=g.mods;d=T?[...d,...T]:d;let c=!1;if(x(r)&&u("group",d)){let h=this,y=((D=g.array)==null?void 0:D.length)||0;y=h.checked?y+1:y-1;let S=parseInt(n&&i(n))||1;c=y>=S}else if(c=r.checkValidity(),u("required",d)&&(V(r.value)||x(r)&&!r.checked)&&(c=!1),!V(r.value)){for(let h of d)if(typeof a[h]=="function")if(h==="date"){let y=l[0];l.forEach(S=>{d.includes(S)&&(y=S)}),c=c&&a.date[y](r.value);break}else{c=c&&a[h](r.value);break}q(r)&&(n&&i(n))===!1&&(c=!1)}return L(r,c),k(r,{value:r.value,valid:c}),!c&&m(r,"input, textarea")&&!C(r)&&!u("bluronly")&&v(r,"input",b),!c&&u("refocus")&&r.focus(),c}});function L(e,t,n={}){let{errorNode:i,errorMsg:o}=n,s=Z(e)||"";p(e).mods.includes("group")&&(i=e.parentNode.parentNode,o=M(i,"data-error-msg")),i=i||G(e,".error-msg")||e.parentNode,o=o||M(e,"data-error-msg")||`${s} required`,t?(i.removeAttribute("data-error"),e.removeAttribute("invalid")):(H(i,"data-error",o),H(e,"invalid"))}},P=J;document.addEventListener("alpine:init",()=>{window.Alpine.plugin(P)});})();
