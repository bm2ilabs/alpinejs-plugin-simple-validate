(()=>{var dt=function($){let F="data-error",et=`${F}-msg`,T="error-msg",C="validate",I="required",L="input",q="checkbox",_="radio",M="group",N="form",P="fieldset",S='input:not([type="button"]):not([type="search"]):not([type="reset"]):not([type="submit"]),select,textarea',z="hidden",m=(t,e)=>e?t instanceof HTMLElement&&t.matches(e):t instanceof HTMLElement,U=t=>m(t,S),V=(t,e)=>typeof t===e,l=(t,e)=>t.includes(e),B=(t,e)=>t.querySelectorAll(e),K=t=>l([q,_,"range"],t.type),Z=t=>l([q,_],t.type),nt=t=>t.type===q,H=(t,e,n)=>t.addEventListener(e,n),Q=(t,e)=>t.getAttribute(e),b=(t,e,n="")=>t.setAttribute(e,n),y=t=>m(t)?t:document.getElementById(t)||B(document,`[name ="${t}"]`)[0],O=t=>m(y(t),N)?t:m(y(t))?t.closest(N):!1,A=t=>t.name||Q(t,"id"),k=t=>String(t).trim(),v=t=>{let e=y(t),n=h[O(e)]||{};return m(e,N)?Object.values(n):m(e,P)?Object.values(n).filter(o=>o.set===e):U(e)?n[A(e)]:n},W=t=>`${T}-${t}`,D=["mmddyyyy","ddmmyyyy","yyyymmdd"],rt=/^(\d{1,2})[-/.](\d{1,2})[-/.](\d{4})$/,ot=/^(\d{4})[-/.](\d{1,2})[-/.](\d{1,2})$/;function X(t,e){let n=t.split(/[-/.]/),o=D.indexOf(e),s,a,i;rt.test(t)?(o===0&&([s,a,i]=n),o===1&&([a,s,i]=n)):ot.test(t)&&o===2&&([i,s,a]=n);let u=`${i}-${s}-${a}`,c=new Date(u),r=c.getTime();return!V(r,"number")||Number.isNaN(r)?!1:c.toISOString().startsWith(u)}let h=$.reactive({}),J={};function R(t,e,n){let o=O(t),s=A(t);if(m(o,N)&&m(t,S)&&s){h[o]=h[o]||{},e={...h[o][s],name:s,node:t,value:t.value,...e};let a=e.value,i=!a.trim();if(e.required&&(e.valid=!i&&e.valid),e.required||(e.valid=i?!0:e.valid),Z(t)){let u=e.array||[];nt(t)&&(t.checked&&!u.includes(a)&&u.push(a),t.checked||(u=u.filter(c=>c!==a))),t.type===_&&t.checked&&(u=[a]),e.array=u,e.value=u.toString(),e.group&&(e.valid=u.length>=e.group)}h[o][s]=e}n&&w(t,e.valid)}let d={};d.email=t=>/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(k(t)),d.tel=t=>/^[+]?[(]?[0-9]{3}[)]?[-\s.]?[0-9]{3}[-\s.]?[0-9]{4,6}$/.test(k(t)),d.website=t=>/^(https?:\/\/)?(www\.)?([a-zA-Z0-9]+(-?[a-zA-Z0-9])*\.)+[\w]{2,}(\/\S*)?$/.test(k(t)),d.url=t=>/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()!@:%_+.~#?&/=]*)/.test(k(t)),d.number=t=>!isNaN(parseFloat(t))&&isFinite(t),d.integer=t=>d.number(t)&&Number.isInteger(Number(t)),d.wholenumber=t=>d.integer(t)&&Number(t)>0,d.date=t=>X(t,D[0]),D.forEach(t=>{d.date[t]=e=>X(e,t)});let g={};g.data=t=>v(t),g.fieldData=t=>h[O(t)].find(e=>e.name===A(t)),g.updateData=(t,e,n)=>R(y(t),e,n),g.toggleError=(t,e)=>w(y(t),e),g.submit=t=>{v(t.target).forEach(e=>{e.valid===!1&&(w(e.node,!1),t.preventDefault(),console.error(`${e.name} not valid`))})},g.isComplete=t=>{let e=v(t);return e.length>=0?!e.some(n=>!n.valid):e.valid},Object.keys(d).forEach(t=>g={...g,[t]:d[t]}),$.magic(C,()=>g),$.directive(I,(t,{value:e,expression:n},{evaluate:o,Alpine:s})=>{n&&s.effect(()=>{var u;let a=o(n),i=e?((u=v(e))==null?void 0:u.value)===a:a;R(t,{required:i}),i||w(t,!0)})}),$.directive(C,(t,{modifiers:e,expression:n},{evaluate:o})=>{let s=O(t),a=c=>{let r=l(e,M)?n&&o(n)||1:!1,p=E=>l(e,I)||l(e,M)||E.hasAttribute(I)||!1,x=c.closest(".field-parent")||l(e,M)?c.parentNode.parentNode:c.parentNode;return{valid:!p(c),required:p(c),mods:e,set:c.closest(P),group:r,parentNode:x}};function i(c){ct(c);let r=K(c)?"click":m(c,"select")?"change":"blur";H(c,r,u),l(e,L)&&!K(c)&&H(c,L,u)}m(t,N)&&(J[s]=e,B(t,S).forEach(r=>{R(r,a(r)),r.getAttributeNames().some(p=>l(p,`x-${C}`))||i(r)})),U(t)&&(e=[...e,...J[s]||[]],R(t,a(t)),i(t));function u(c){let r=this,p=r.value.trim(),x=v(r),E=[r.type,...x.mods],f=!0,j={value:r.value},Y=n&&o(n),at=r.checked;if(Z(r)&&l(E,M))j.group=parseInt(Y)||1;else{if(f=r.checkValidity(),x.required&&(!p||Z(r)&&!at)&&(f=!1),f&&p){for(let G of E)if(V(d[G],"function")){if(G==="date"){let it=E.filter(ut=>D.indexOf(ut)!==-1)[0]||D[0];f=d.date[it](p)}else f=d[G](p);break}Y===!1&&(f=!1)}j.valid=f}return R(r,j,!0),!f&&!l(E,"bluronly")&&c.type==="blur"&&H(r,L,u),!f&&l(E,"refocus")&&r.focus(),f}});function w(t,e){let n=A(t),o=v(t).parentNode,s=y(W(n));b(t,"aria-invalid",!e),e?(b(s,z),o.removeAttribute(F)):(s.removeAttribute(z),b(o,F,s.textContent))}function st(t){for(;t;){if(t=t.nextElementSibling,m(t,`.${T}`))return t;if(m(t,S))return!1}return!1}function ct(t){let e=A(t),n=W(e),o=v(t),s=o.group?o.parentNode:t,a=document.createElement("span");a.className=T;let i=y(n)||st(s)||a;b(i,"id",n),b(i,z),i.innerHTML||(i.textContent=Q(s,et)||`${e.replace(/[-_]/g," ")} ${I}`),b(t,"aria-errormessage",n),y(n)||s.after(i)}},tt=dt;document.addEventListener("alpine:init",()=>{window.Alpine.plugin(tt)});})();
