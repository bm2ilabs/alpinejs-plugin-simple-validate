(()=>{var mt=function(M){let st="data-error-msg",_="data-error",z="error-msg",Z="validate",g="required",S="input",F="checkbox",q="radio",H="group",D="form",rt="fieldset",w='input:not([type="button"]):not([type="search"]):not([type="reset"]):not([type="submit"]),select,textarea',$="hidden",d=(t,e)=>e?t instanceof HTMLElement&&t.matches(e):t instanceof HTMLElement,G=t=>d(t,w),P=(t,e)=>typeof t===e,m=(t,e)=>t.includes(e),U=(t,e)=>t.querySelectorAll(e),V=t=>m([F,q,"range"],t.type),j=t=>m([F,q],t.type),L=t=>t.type===F,O=(t,e,r)=>t.addEventListener(e,r),B=(t,e)=>t.getAttribute(e),A=(t,e,r="")=>t.setAttribute(e,r),p=t=>d(t)?t:document.getElementById(t)||U(document,`[name ="${t}"]`)[0],T=t=>d(p(t),D)?t:d(p(t))?t.closest(D):!1,I=t=>t.name||B(t,"id"),x=t=>String(t).trim(),v=t=>{let e=p(t),r=X[T(e)]||[];return d(e,rt)?r.filter(a=>a.set===e):G(e)?r.filter(a=>a.name===I(e))[0]:r},K=t=>m(v(t).mods,"group"),Q=t=>`error-msg-${t}`,N=["mmddyyyy","ddmmyyyy","yyyymmdd"],ot=/^(\d{1,2})[-/.](\d{1,2})[-/.](\d{4})$/,at=/^(\d{4})[-/.](\d{1,2})[-/.](\d{1,2})$/;function W(t,e){let r=t.split(/[-/.]/),a=N.indexOf(e),o,c,u;ot.test(t)?(a===0&&([o,c,u]=r),a===1&&([c,o,u]=r)):at.test(t)&&a===2&&([u,o,c]=r);let y=`${u}-${o}-${c}`,n=new Date(y),s=n.getTime();return!P(s,"number")||Number.isNaN(s)?!1:n.toISOString().startsWith(y)}let X=M.reactive({}),J={};function R(t,e,r){let a=T(t),o=I(t);if(e={name:o,node:t,value:t.value,...e},d(a,D)&&o){let c=v(a);if(c.some(u=>u.name===o)){e={...v(t),...e};let u=e.value,y=!u.trim();if(r===!0&&(e.mods.push(g),e.valid=!y&&e.valid),r===!1&&(e.mods=e.mods.filter(n=>n!==g),e.valid=y?!0:e.valid),L(t)&&u){let n=e.array;n=n.some(s=>s===u)?n.filter(s=>s!==u):[...n,u],e.array=n,e.value=n.toString()}c=c.map(n=>n.name===o?e:n)}else c.push(e);X[a]=c}}let i={};i.email=t=>/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(x(t)),i.tel=t=>/^[+]?[(]?[0-9]{3}[)]?[-\s.]?[0-9]{3}[-\s.]?[0-9]{4,6}$/.test(x(t)),i.website=t=>/^(https?:\/\/)?(www\.)?([a-zA-Z0-9]+(-?[a-zA-Z0-9])*\.)+[\w]{2,}(\/\S*)?$/.test(x(t)),i.url=t=>/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()!@:%_+.~#?&/=]*)/.test(x(t)),i.number=t=>!isNaN(parseFloat(t))&&isFinite(t),i.integer=t=>i.number(t)&&Number.isInteger(Number(t)),i.wholenumber=t=>i.integer(t)&&Number(t)>0,i.date=t=>W(t,N[0]),N.forEach(t=>{i.date[t]=e=>W(e,t)});let f={};f.data=t=>v(t),f.updateData=(t,e)=>R(p(t),e),f.makeRequired=(t,e)=>R(p(t),{},e),f.isRequired=t=>m(v(t).mods,g)||p(t).hasAttribute(g),f.toggleError=(t,e)=>k(p(t),e),f.submit=t=>{v(t.target).forEach(e=>{e.valid===!1&&(k(e.node,!1),t.preventDefault(),console.error(`${e.name} not valid`))})},f.isComplete=t=>{let e=v(t);return e.length>=0?!e.some(r=>!r.valid):e.valid},Object.keys(i).forEach(t=>f={...f,[t]:i[t]}),M.magic(Z,()=>f),M.directive(Z,(t,{modifiers:e,expression:r},{evaluate:a})=>{let o=T(t),c=n=>{let s=E=>m(e,g)||m(e,H)||E.hasAttribute(g)||!1;return{array:L(n)&&[],value:j(n)?"":n.value,valid:!s(n),mods:e,set:n.closest("fieldset")}};function u(n){it(n);let s=V(n)?"click":d(n,"select")?"change":"blur";O(n,s,y),m(e,S)&&!V(n)&&O(n,S,y)}d(t,D)&&(J[o]=e,U(t,w).forEach(s=>{R(s,c(s)),s.getAttributeNames().some(E=>m(E,"x-validate"))||u(s)})),G(t)&&(e=[...e,...J[o]||[]],R(t,c(t)),u(t));function y(n){let s=this,E=s.value.trim(),Y=v(s),h=[s.type,...Y.mods];s.hasAttribute(g)&&h.push(g);let l=!0,tt=r&&a(r),et=s.checked;if(L(s)&&m(h,H)){let b=Y.array.length;et?b++:b--;let C=parseInt(tt)||1;l=b>=C}else if(l=s.checkValidity(),m(h,g)&&(!E||j(s)&&!et)&&(l=!1),l&&E){for(let b of h)if(P(i[b],"function")){if(b==="date"){let C=h.filter(ut=>N.indexOf(ut)!==-1)[0]||N[0];l=i.date[C](E)}else l=i[b](E);break}tt===!1&&(l=!1)}return k(s,l),R(s,{value:s.value,valid:l}),!l&&!m(h,"bluronly")&&n.type==="blur"&&O(s,S,y),!l&&m(h,"refocus")&&s.focus(),l}});function k(t,e){let r=I(t),a=t.parentNode;K(t)&&(a=a.parentNode);let o=p(Q(r));A(t,"aria-invalid",!e),e?(A(o,$),a.removeAttribute(_)):(o.removeAttribute($),A(a,_,o.textContent))}function ct(t){for(;t;){if(t=t.nextElementSibling,d(t,`.${z}`))return t;if(d(t,w))return!1}return!1}function it(t){let e=I(t),r=K(t)?t.parentNode.parentNode:t,a=document.createElement("span");a.className=z;let o=ct(r)||a,c=Q(e);A(o,"id",c),A(o,$),o.innerHTML||(o.textContent=B(t,st)||`${e.replace(/[-_]/g," ")} required`),A(t,"aria-errormessage",c),p(c)||r.after(o)}},nt=mt;document.addEventListener("alpine:init",()=>{window.Alpine.plugin(nt)});})();
