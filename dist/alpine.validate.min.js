(()=>{var ut=function(L){let H="data-error-msg",P="data-error",U="error-msg",V="aria-invalid",rt="aria-errormessage",j="validate",v="required",O="input",T="checkbox",B="radio",K="group",I="form",Q="fieldset",W='input:not([type="button"]):not([type="search"]):not([type="reset"]):not([type="submit"]),select,textarea',k="hidden",f=(t,e)=>e?t instanceof HTMLElement&&t.matches(e):t instanceof HTMLElement,X=t=>f(t,W),_=(t,e)=>typeof t===e,d=(t,e)=>t.includes(e),J=(t,e)=>t.querySelectorAll(e),C=t=>d([T,B,"range"],t.type),ot=t=>d([T,B],t.type),q=t=>t.type===T,x=(t,e,s)=>t.addEventListener(e,s),z=(t,e)=>t.getAttribute(e),h=(t,e,s="")=>t.setAttribute(e,s),A=t=>_(t,"string")?document.getElementById(t):f(t)?t:!1,G=t=>f(A(t),I)?t:f(A(t))?t.closest(I):!1,M=t=>t.name||z(t,"id"),F=t=>String(t).trim(),E=t=>{t=A(t);let e=et[G(t)]||[];return f(t,Q)?e.filter(s=>s.set===t):X(t)?e.filter(s=>s.name===M(t))[0]:e};function at(t,e){var s=t.nextElementSibling;return!e||f(s,e)?s:!1}let Y=t=>`error-msg-${t}`,N=["mmddyyyy","ddmmyyyy","yyyymmdd"];function tt(t,e){let[s,u,r]=t.split(/[-/.]/),o;if(e===N[0]&&/^(\d{1,2})[-/.](\d{1,2})[-/.](\d{4})$/.test(t))o=`${r}-${s}-${u}`;else if(e===N[1]&&/^(\d{1,2})[-/.](\d{1,2})[-/.](\d{4})$/.test(t))o=`${r}-${u}-${s}`;else if(e===N[2]&&/^(\d{4})[-/.](\d{1,2})[-/.](\d{1,2})$/.test(t))o=`${s}-${u}-${r}`;else return!1;let a=new Date(o),b=a.getTime();return!_(b,"number")||Number.isNaN(b)?!1:a.toISOString().startsWith(o)}let et=L.reactive({}),w={};function $(t,e,s){let u=G(t),r=M(t);if(e={name:r,node:t,value:t.value,...e},f(u,I)&&r){let o=E(u);if(o.some(a=>a.name===r)){e={...E(t),...e};let a=e.value,b=!a.trim();if(s===!0&&(e.mods=[...e.mods,v],e.valid=!b&&e.valid),s===!1&&(e.mods=e.mods.filter(c=>c!==v),e.valid=b?!0:e.valid),q(t)&&!a){let c=e.array;c=c.some(n=>n===a)?c.filter(n=>n!==a):[...c,a],e={...e,array:c,value:c.toString()}}o=o.map(c=>c.name===r?e:c)}else o.push(e);et[u]=o}}let i={};i.email=t=>/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(F(t)),i.tel=t=>/^[+]?[(]?[0-9]{3}[)]?[-\s.]?[0-9]{3}[-\s.]?[0-9]{4,6}$/.test(F(t)),i.website=t=>/^(https?:\/\/)?(www\.)?([a-zA-Z0-9]+(-?[a-zA-Z0-9])*\.)+[\w]{2,}(\/\S*)?$/.test(F(t)),i.url=t=>/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()!@:%_+.~#?&/=]*)/.test(F(t)),i.number=t=>!isNaN(parseFloat(t))&&isFinite(t),i.integer=t=>i.number(t)&&Number.isInteger(Number(t)),i.wholenumber=t=>i.integer(t)&&Number(t)>0,i.date=t=>tt(t,N[0]),N.forEach(t=>{i.date[t]=e=>tt(e,t)});let g={};g.data=t=>E(t),g.updateData=(t,e)=>$(A(t),e),g.makeRequired=(t,e)=>$(A(t),{},e),g.isRequired=t=>d(E(t).mods,v),g.toggleError=(t,e)=>Z(A(t),e),g.submit=t=>{E(t.target).forEach(e=>{e.valid===!1&&(Z(e.node,!1),t.preventDefault(),console.error(`${e.name} not valid`))})},g.isComplete=t=>!E(t).some(e=>!e.valid),Object.keys(i).forEach(t=>g={...g,[t]:i[t]}),L.magic(j,()=>g),L.directive(j,(t,{modifiers:e,expression:s},{evaluate:u})=>{let r=G(t);w[r]=w[r]||[];let o=[...e,...w[r]],a=(n,p)=>{let R=y=>d(o,v)||d(o,K)||y.hasAttribute(v)||!1,l={array:q(n)&&[],value:ot(n)?"":n.value,valid:!R(n),mods:o};return p&&(l={...l,set:p}),l};function b(n){let p=C(n)?"click":f(n,"select")?"change":"blur";x(n,p,c),d(o,O)&&!C(n)&&x(n,O,c)}if(f(t,I)){w[r]=e;let n=J(t,Q);(n.length>0?n:[t]).forEach(R=>{J(R,W).forEach(y=>{$(y,a(y,R)),y.getAttributeNames().some(m=>d(m,"x-validate"))||(b(y),nt(y))})})}X(t)&&($(t,a(t)),nt(t),b(t));function c(){let n=this,p=n.value.trim(),R=E(n),l=[n.type,...R.mods];n.hasAttribute(v)&&(l=[...l,v]);let y=d(l,v),m=!0;if(q(n)&&d(l,K)){let D=R.array.length;D=n.checked?D+1:D-1;let S=parseInt(s&&u(s))||1;m=D>=S}else if(m=n.checkValidity(),y&&(!p||!n.checked)&&(m=!1),m&&p){for(let S of l)if(_(i[S],"function")){if(S==="date"){let it=l.filter(ct=>N.indexOf(ct)!==-1);m=i.date[it[0]||N[0]](p)}else m=i[S](p);break}(s&&u(s))===!1&&(m=!1)}return Z(n,m),$(n,{value:n.value,valid:m}),!m&&f(n,"input, textarea")&&!C(n)&&!d(l,"bluronly")&&x(n,O,c),!m&&d(l,"refocus")&&n.focus(),m}});function Z(t,e){let s=M(t),r=d(E(t).mods,"group")?t.parentNode.parentNode:t.parentNode,o=z(t,H)||`${s} required`,a=A(Y(s));e?(h(t,V,"false"),a&&h(a,k),r.removeAttribute(P)):(h(t,V,"true"),a&&a.removeAttribute(k),h(r,P,o))}function nt(t){let e=M(t),s=d(E(t).mods,"group")?t.parentNode.parentNode:t,u=document.createElement("span");u.className=U;let r=at(s,`.${U}`)||u,o=Y(e);h(r,"id",o),h(r,k),r.innerHTML||(r.textContent=z(t,H)||`${e} required`),h(t,rt,o),A(o)||s.after(r)}},st=ut;document.addEventListener("alpine:init",()=>{window.Alpine.plugin(st)});})();
