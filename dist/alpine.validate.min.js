(()=>{var dt=function(R){let x="data-error",et=`${x}-msg`,F="error-msg",T="validate",$="required",C="input",L="checkbox",q="radio",I="group",M="form",U="fieldset",_='input:not([type="button"]):not([type="search"]):not([type="reset"]):not([type="submit"]),select,textarea',z="hidden",l=(t,e)=>e?t instanceof HTMLElement&&t.matches(e):t instanceof HTMLElement,V=t=>l(t,_),B=(t,e)=>typeof t===e,m=(t,e)=>t.includes(e),K=(t,e)=>t.querySelectorAll(e),Q=t=>m([L,q,"range"],t.type),Z=t=>m([L,q],t.type),nt=t=>t.type===L,H=(t,e,n)=>t.addEventListener(e,n),j=(t,e)=>t.getAttribute(e),h=(t,e,n="")=>t.setAttribute(e,n),y=t=>l(t)?t:document.getElementById(t)||K(document,`[name ="${t}"]`)[0],S=t=>l(y(t),M)?t:l(y(t))?t.closest(M):!1,v=t=>j(t,"name")||j(t,"id"),O=t=>String(t).trim(),E=t=>{let e=y(t),n=N[v(S(e))]||{};return l(e,M)?Object.values(n):l(e,U)?Object.values(n).filter(o=>o.set===e):V(e)?n[v(e)]:n},W=t=>`${F}-${t}`,A=["mmddyyyy","ddmmyyyy","yyyymmdd"],rt=/^(\d{1,2})[-/.](\d{1,2})[-/.](\d{4})$/,ot=/^(\d{4})[-/.](\d{1,2})[-/.](\d{1,2})$/;function X(t,e){let n=t.split(/[-/.]/),o=A.indexOf(e),s,a,i;rt.test(t)?(o===0&&([s,a,i]=n),o===1&&([a,s,i]=n)):ot.test(t)&&o===2&&([i,s,a]=n);let u=`${i}-${s}-${a}`,c=new Date(u),r=c.getTime();return!B(r,"number")||Number.isNaN(r)?!1:c.toISOString().startsWith(u)}let N=R.reactive({}),J={};function D(t,e,n){let o=v(S(t)),s=v(t);if(o&&s){N[o]=N[o]||{},e={...N[o][s],name:s,node:t,value:t.value,...e};let a=e.value,i=!a.trim();if(e.required&&(e.valid=!i&&e.valid),e.required||(e.valid=i?!0:e.valid),Z(t)){let u=e.array||[];nt(t)&&(t.checked&&!u.includes(a)&&u.push(a),t.checked||(u=u.filter(c=>c!==a))),t.type===q&&t.checked&&(u=[a]),e.array=u,e.value=u.toString(),e.group&&(e.valid=u.length>=e.group)}N[o][s]=e}n&&k(t,e.valid)}let d={};d.email=t=>/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(O(t)),d.tel=t=>/^[+]?[(]?[0-9]{3}[)]?[-\s.]?[0-9]{3}[-\s.]?[0-9]{4,6}$/.test(O(t)),d.website=t=>/^(https?:\/\/)?(www\.)?([a-zA-Z0-9]+(-?[a-zA-Z0-9])*\.)+[\w]{2,}(\/\S*)?$/.test(O(t)),d.url=t=>/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()!@:%_+.~#?&/=]*)/.test(O(t)),d.number=t=>!isNaN(parseFloat(t))&&isFinite(t),d.integer=t=>d.number(t)&&Number.isInteger(Number(t)),d.wholenumber=t=>d.integer(t)&&Number(t)>0,d.date=t=>X(t,A[0]),A.forEach(t=>{d.date[t]=e=>X(e,t)});let g={};g.data=t=>E(t),g.fieldData=t=>N[S(t)].find(e=>e.name===v(t)),g.updateData=(t,e,n)=>D(y(t),e,n),g.toggleError=(t,e)=>k(y(t),e),g.submit=t=>{E(t.target).forEach(e=>{e.valid===!1&&(k(e.node,!1),t.preventDefault(),console.error(`${e.name} not valid`))})},g.isComplete=t=>{let e=E(t);return e.length>=0?!e.some(n=>!n.valid):e.valid},Object.keys(d).forEach(t=>g={...g,[t]:d[t]}),R.magic(T,()=>g),R.directive($,(t,{value:e,expression:n},{evaluate:o,Alpine:s})=>{n&&s.effect(()=>{var u;let a=o(n),i=e?((u=E(e))==null?void 0:u.value)===a:a;D(t,{required:i}),i||k(t,!0)})}),R.directive(T,(t,{modifiers:e,expression:n},{evaluate:o})=>{let s=S(t),a=c=>{let r=m(e,I)?n&&o(n)||1:!1,p=b=>m(e,$)||m(e,I)||b.hasAttribute($)||!1,w=c.closest(".field-parent")||m(e,I)?c.parentNode.parentNode:c.parentNode;return{valid:!p(c),required:p(c),mods:e,set:c.closest(U),group:r,parentNode:w}};function i(c){ct(c);let r=Q(c)?"click":l(c,"select")?"change":"blur";H(c,r,u),m(e,C)&&!Q(c)&&H(c,C,u)}l(t,M)&&(J[s]=e,K(t,_).forEach(r=>{D(r,a(r)),r.getAttributeNames().some(p=>m(p,`x-${T}`))||i(r)})),V(t)&&(e=[...e,...J[s]||[]],D(t,a(t)),i(t));function u(c){let r=this,p=r.value.trim(),w=E(r),b=[r.type,...w.mods],f=!0,G={value:r.value},Y=n&&o(n),at=r.checked;if(Z(r)&&m(b,I))G.group=parseInt(Y)||1;else{if(f=r.checkValidity(),w.required&&(!p||Z(r)&&!at)&&(f=!1),f&&p){for(let P of b)if(B(d[P],"function")){if(P==="date"){let it=b.filter(ut=>A.indexOf(ut)!==-1)[0]||A[0];f=d.date[it](p)}else f=d[P](p);break}Y===!1&&(f=!1)}G.valid=f}return D(r,G,!0),!f&&!m(b,"bluronly")&&c.type==="blur"&&H(r,C,u),!f&&m(b,"refocus")&&r.focus(),f}});function k(t,e){let n=v(t),o=E(t).parentNode,s=y(W(n));h(t,"aria-invalid",!e),e?(h(s,z),o.removeAttribute(x)):(s.removeAttribute(z),h(o,x,s.textContent))}function st(t){for(;t;){if(t=t.nextElementSibling,l(t,`.${F}`))return t;if(l(t,_))return!1}return!1}function ct(t){let e=v(t),n=W(e),o=E(t),s=o.group?o.parentNode:t,a=document.createElement("span");a.className=F;let i=y(n)||st(s)||a;h(i,"id",n),h(i,z),i.innerHTML||(i.textContent=j(s,et)||`${e.replace(/[-_]/g," ")} ${$}`),h(t,"aria-errormessage",n),y(n)||s.after(i)}},tt=dt;document.addEventListener("alpine:init",()=>{window.Alpine.plugin(tt)});})();
