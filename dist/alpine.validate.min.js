(()=>{var ct=function(F){let tt="data-error-msg",H="data-error",G="error-msg",P="validate",p="required",x="input",L="checkbox",U="radio",V="group",S="form",et="fieldset",T='input:not([type="button"]):not([type="search"]):not([type="reset"]):not([type="submit"]),select,textarea',k="hidden",f=(t,e)=>e?t instanceof HTMLElement&&t.matches(e):t instanceof HTMLElement,j=t=>f(t,T),O=(t,e)=>typeof t===e,u=(t,e)=>t.includes(e),nt=(t,e)=>t.querySelectorAll(e),C=t=>u([L,U,"range"],t.type),B=t=>u([L,U],t.type),_=t=>t.type===L,q=(t,e,s)=>t.addEventListener(e,s),K=(t,e)=>t.getAttribute(e),A=(t,e,s="")=>t.setAttribute(e,s),y=t=>O(t,"string")?document.getElementById(t):f(t)?t:!1,z=t=>f(y(t),S)?t:f(y(t))?t.closest(S):!1,M=t=>t.name||K(t,"id"),I=t=>String(t).trim(),E=t=>{t=y(t);let e=J[z(t)]||[];return f(t,et)?e.filter(s=>s.set===t):j(t)?e.filter(s=>s.name===M(t))[0]:e};function st(t,e){var s=t.nextElementSibling;if(!e)return s;for(;s;){if(f(s,T))return!1;if(f(s,e))return s;s=s.nextElementSibling}return!1}let Q=t=>`error-msg-${t}`,h=["mmddyyyy","ddmmyyyy","yyyymmdd"],W=/^(\d{1,2})[-/.](\d{1,2})[-/.](\d{4})$/;function X(t,e){let[s,i,r]=t.split(/[-/.]/),o;if(e===h[0]&&W.test(t))o=`${r}-${s}-${i}`;else if(e===h[1]&&W.test(t))o=`${r}-${i}-${s}`;else if(e===h[2]&&/^(\d{4})[-/.](\d{1,2})[-/.](\d{1,2})$/.test(t))o=`${s}-${i}-${r}`;else return!1;let m=new Date(o),v=m.getTime();return!O(v,"number")||Number.isNaN(v)?!1:m.toISOString().startsWith(o)}let J=F.reactive({}),w={};function R(t,e,s){let i=z(t),r=M(t);if(e={name:r,node:t,value:t.value,...e},f(i,S)&&r){let o=E(i);if(o.some(m=>m.name===r)){e={...E(t),...e};let m=e.value,v=!m.trim();if(s===!0&&(e.mods=[...e.mods,p],e.valid=!v&&e.valid),s===!1&&(e.mods=e.mods.filter(c=>c!==p),e.valid=v?!0:e.valid),_(t)&&!m){let c=e.array;c=c.some(n=>n===m)?c.filter(n=>n!==m):[...c,m],e={...e,array:c,value:c.toString()}}o=o.map(c=>c.name===r?e:c)}else o.push(e);J[i]=o}}let a={};a.email=t=>/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(I(t)),a.tel=t=>/^[+]?[(]?[0-9]{3}[)]?[-\s.]?[0-9]{3}[-\s.]?[0-9]{4,6}$/.test(I(t)),a.website=t=>/^(https?:\/\/)?(www\.)?([a-zA-Z0-9]+(-?[a-zA-Z0-9])*\.)+[\w]{2,}(\/\S*)?$/.test(I(t)),a.url=t=>/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()!@:%_+.~#?&/=]*)/.test(I(t)),a.number=t=>!isNaN(parseFloat(t))&&isFinite(t),a.integer=t=>a.number(t)&&Number.isInteger(Number(t)),a.wholenumber=t=>a.integer(t)&&Number(t)>0,a.date=t=>X(t,h[0]),h.forEach(t=>{a.date[t]=e=>X(e,t)});let g={};g.data=t=>E(t),g.updateData=(t,e)=>R(y(t),e),g.makeRequired=(t,e)=>R(y(t),{},e),g.isRequired=t=>u(E(t).mods,p)||y(t).hasAttribute(p),g.toggleError=(t,e)=>Z(y(t),e),g.submit=t=>{E(t.target).forEach(e=>{e.valid===!1&&(Z(e.node,!1),t.preventDefault(),console.error(`${e.name} not valid`))})},g.isComplete=t=>!E(t).some(e=>!e.valid),Object.keys(a).forEach(t=>g={...g,[t]:a[t]}),F.magic(P,()=>g),F.directive(P,(t,{modifiers:e,expression:s},{evaluate:i})=>{let r=z(t);w[r]=w[r]||[];let o=[...e,...w[r]],m=n=>{let l=N=>u(o,p)||u(o,V)||N.hasAttribute(p)||!1;return{array:_(n)&&[],value:B(n)?"":n.value,valid:!l(n),mods:o,set:n.closest("fieldset")}};function v(n){rt(n);let l=C(n)?"click":f(n,"select")?"change":"blur";q(n,l,c),u(o,x)&&!C(n)&&q(n,x,c)}f(t,S)&&(w[r]=e,nt(t,T).forEach(l=>{R(l,m(l)),l.getAttributeNames().some(N=>u(N,"x-validate"))||v(l)})),j(t)&&(R(t,m(t)),v(t));function c(){let n=this,l=n.value.trim(),N=E(n),b=[n.type,...N.mods];n.hasAttribute(p)&&(b=[...b,p]);let ot=u(b,p),d=!0;if(_(n)&&u(b,V)){let D=N.array.length;D=n.checked?D+1:D-1;let $=parseInt(s&&i(s))||1;d=D>=$}else if(d=n.checkValidity(),ot&&(!l||B(n)&&!n.checked)&&(d=!1),d&&l){for(let $ of b)if(O(a[$],"function")){if($==="date"){let it=b.filter(at=>h.indexOf(at)!==-1);d=a.date[it[0]||h[0]](l)}else d=a[$](l);break}(s&&i(s))===!1&&(d=!1)}return Z(n,d),R(n,{value:n.value,valid:d}),!d&&f(n,"input, textarea")&&!C(n)&&!u(b,"bluronly")&&q(n,x,c),!d&&u(b,"refocus")&&n.focus(),d}});function Z(t,e){let s=M(t),i=t.parentNode;u(E(t).mods,"group")&&(i=i.parentNode);let r=y(Q(s));A(t,"aria-invalid",!e),e?(A(r,k),i.removeAttribute(H)):(r.removeAttribute(k),A(i,H,r.textContent))}function rt(t){let e=M(t),s=u(E(t).mods,"group")?t.parentNode.parentNode:t,i=document.createElement("span");i.className=G;let r=st(s,`.${G}`)||i,o=Q(e);A(r,"id",o),A(r,k),r.innerHTML||(r.textContent=K(t,tt)||`${e.replace(/[-_]/g," ")} required`),A(t,"aria-errormessage",o),y(o)||s.after(r)}},Y=ct;document.addEventListener("alpine:init",()=>{window.Alpine.plugin(Y)});})();
