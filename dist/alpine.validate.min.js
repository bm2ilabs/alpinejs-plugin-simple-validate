(()=>{var G=function(D){let q="validate",f=(e,t)=>t?e instanceof HTMLElement&&e.matches(t):e instanceof HTMLElement,z='input:not([type="button"]):not([type="search"]):not([type="reset"]):not([type="submit"]),select,textarea',M=e=>f(e,z),H=(e,t)=>typeof e===t,P=e=>e.querySelectorAll(z),Z=e=>["checkbox","radio","range"].includes(e.type),x=e=>["checkbox","radio"].includes(e.type),v=(e,t,n)=>e.addEventListener(t,n),L=(e,t)=>e.getAttribute(t),N=e=>H(e,"string")?document.querySelector(`#${e}`):f(e)?e:!1,A=e=>f(N(e),"form")?e:f(N(e))?e.closest("form"):!1,T=(e,t,n="")=>e.setAttribute(t,n);function R(e,t){var n=e.nextElementSibling;return!t||f(n,t)?n:!1}let j=e=>e.name||L(e,"id"),$=e=>String(e).trim(),I=e=>$(e)==="",d=["mmddyyyy","ddmmyyyy","yyyymmdd"];function k(e,t){let[n,o,s]=e.split(/[-\/.]/),u;if(t===d[0]&&/^(\d{1,2})[-\/.](\d{1,2})[-\/.](\d{4})$/.test(e))u=`${s}-${n}-${o}`;else if(t===d[1]&&/^(\d{1,2})[-\/.](\d{1,2})[-\/.](\d{4})$/.test(e))u=`${s}-${o}-${n}`;else if(t===d[2]&&/^(\d{4})[-\/.](\d{1,2})[-\/.](\d{1,2})$/.test(e))u=`${n}-${o}-${s}`;else return!1;let i=new Date(u),p=i.getTime();return typeof p!="number"||Number.isNaN(p)?!1:i.toISOString().startsWith(u)}let b=D.reactive({}),w={};function F(e,t){let n=A(e),o=j(e);if(t={name:o,node:e,value:e.value,...t},f(n,"form")&&o){let s=b[n]||[];if(s.some(u=>u.name===o)){let u=s.filter(i=>i.name===o)[0];if(s=s.filter(i=>i.name!==o),u.type==="checkbox"){let i=u.array||[];t.value!==""&&(i=i.some(p=>p===e.value)?i.filter(p=>p!==t.value):[...i,t.value]),t={...u,...t,array:i,value:i.toString()}}else t={...u,...t}}s.push(t),b[n]=s}}let c={};c.email=e=>/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test($(e)),c.tel=e=>/^[\+]?[(]?[0-9]{3}[)]?[-\s\.]?[0-9]{3}[-\s\.]?[0-9]{4,6}$/.test($(e)),c.website=e=>/^(https?:\/\/)?(www\.)?([a-zA-Z0-9]+(-?[a-zA-Z0-9])*\.)+[\w]{2,}(\/\S*)?$/.test($(e)),c.url=e=>/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()!@:%_\+.~#?&\/\/=]*)/.test($(e)),c.number=e=>!isNaN(parseFloat(e))&&isFinite(e),c.integer=e=>c.number(e)&&Number.isInteger(Number(e)),c.wholenumber=e=>c.integer(e)&&Number(e)>0,c.date=e=>k(e,d[0]),c.date[d[0]]=e=>k(e,d[0]),c.date[d[1]]=e=>k(e,d[1]),c.date[d[2]]=e=>k(e,d[2]);let g={};g.formData=e=>b[A(e)].map(t=>Object.getOwnPropertyNames(t).reduce((n,o)=>({...n,[o]:t[o]}),{})),g.updateFormData=(e,t)=>F(N(e),t),g.toggleErrorMessage=(e,t,n)=>S(N(e),t,n),g.submit=e=>{var t;(t=b[e.target])==null||t.forEach(n=>{if(n.valid===!1){let o=n.group?{errorNode:n.node.parentNode.parentNode}:{};S(n.node,!1,o),e.preventDefault(),console.error(`${n.name} not valid`)}})},g.isComplete=e=>(e=N(e),data=b[A(e)],f(e,"fieldset")&&(data=data==null?void 0:data.filter(t=>t.set===e)),!(data==null?void 0:data.some(t=>!t.valid))),Object.keys(c).forEach(e=>g={...g,[e]:c[e]}),D.magic(q,()=>g),D.directive(q,(e,{modifiers:t,expression:n},{evaluate:o})=>{let s=A(e);w[s]=w[s]||[];let u=[...t,...w[s]],i=(r,l=u)=>l.includes(r),p=r=>i("required")||r.hasAttribute("required")||!1;function O(r,l){let a={value:r.value,valid:!p(r)};return f(l)&&(a={...a,set:l}),x(r)&&(a={...a,value:""}),x(r)&&i("group")&&(a={...a,valid:!1,group:!0}),a}function V(r){r.type==="checkbox"&&i("group")?v(r,"click",_):Z(r)?v(r,"click",E):f(r,"select")?v(r,"change",E):(v(r,"blur",E),i("input")&&v(r,"input",E))}if(f(e,"form")){w[s]=t;let r=e.querySelectorAll("fieldset");(r.length>0?r:[e]).forEach(a=>{P(a).forEach(m=>{F(m,O(m,a)),m.getAttributeNames().some(h=>h.includes("x-validate"))||V(m)})})}M(e)&&(F(e,O(e)),V(e));function E(){let r=this,l=[r.type];M(e)&&(l=[...l,...t]);let a=r.checkValidity();if(p(r)&&(I(r.value)||x(r)&&!r.checked)&&(a=!1),!I(r.value)){for(let y of l)if(typeof c[y]=="function")if(y==="date"){let m=d[0];d.forEach(h=>{l.includes(h)&&(m=h)}),a=a&&c.date[m](r.value);break}else{a=a&&c[y](r.value);break}M(e)&&(n&&o(n))===!1&&(a=!1)}return S(r,a),F(r,{value:r.value,valid:a}),!a&&f(r,"input, textarea")&&!Z(r)&&!i("bluronly")&&v(r,"input",E),!a&&i("refocus")&&r.focus(),a}function _(){var m;let r=this,l=((m=b[A(r)].filter(h=>h.name===r.name)[0].array)==null?void 0:m.length)||0;l=r.checked?l+1:l-1;let a=parseInt(n&&o(n))||1,y=l>=a;S(r,y,{errorNode:r.parentNode.parentNode})}});function S(e,t,n={}){let{errorNode:o,errorMsg:s}=n,u=j(e)||"";o=o||R(e,".error-msg")||e.parentNode,s=s||L(e,"data-error-msg")||`${u} required`,t?(o.removeAttribute("data-error"),e.removeAttribute("invalid")):(T(o,"data-error",s),T(e,"invalid"))}},C=G;document.addEventListener("alpine:init",()=>{window.Alpine.plugin(C)});})();
