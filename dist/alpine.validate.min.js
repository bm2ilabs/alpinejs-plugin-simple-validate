(()=>{var G=function(F){let q="validate",f=(e,t)=>t?e instanceof HTMLElement&&e.matches(t):e instanceof HTMLElement,z='input:not([type="button"]):not([type="search"]):not([type="reset"]),select,textarea',M=e=>f(e,z),H=(e,t)=>typeof e===t,P=e=>e.querySelectorAll(z),Z=e=>["checkbox","radio","range"].includes(e.type),x=e=>["checkbox","radio"].includes(e.type),y=(e,t,n)=>e.addEventListener(t,n),L=(e,t)=>e.getAttribute(t),b=e=>H(e,"string")?document.querySelector(`#${e}`):f(e)?e:!1,N=e=>f(b(e),"form")?e:f(b(e))?e.closest("form"):!1,T=(e,t,n="")=>e.setAttribute(t,n);function R(e,t){var n=e.nextElementSibling;return!t||f(n,t)?n:!1}let j=e=>e.name||L(e,"id"),$=e=>String(e).trim(),I=e=>$(e)==="",d=["mmddyyyy","ddmmyyyy","yyyymmdd"];function k(e,t){let[n,a,i]=e.split(/[-\/.]/),l;if(t===d[0]&&/^(\d{1,2})[-\/.](\d{1,2})[-\/.](\d{4})$/.test(e))l=`${i}-${n}-${a}`;else if(t===d[1]&&/^(\d{1,2})[-\/.](\d{1,2})[-\/.](\d{4})$/.test(e))l=`${i}-${a}-${n}`;else if(t===d[2]&&/^(\d{4})[-\/.](\d{1,2})[-\/.](\d{1,2})$/.test(e))l=`${n}-${a}-${i}`;else return!1;let s=new Date(l),p=s.getTime();return typeof p!="number"||Number.isNaN(p)?!1:s.toISOString().startsWith(l)}let h=F.reactive({}),w={};function S(e,t){let n=N(e),a=j(e);if(t={name:a,node:e,value:e.value,...t},f(n,"form")&&a){let i=h[n]||[];if(i.some(l=>l.name===a)){let l=i.filter(s=>s.name===a)[0];if(i=i.filter(s=>s.name!==a),l.type==="checkbox"){let s=l.array||[];t.value!==""&&(s=s.some(p=>p===e.value)?s.filter(p=>p!==t.value):[...s,t.value]),t={...l,...t,array:s,value:s.toString()}}else t={...l,...t}}i.push(t),h[n]=i}}let c={};c.email=e=>/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test($(e)),c.tel=e=>/^[\+]?[(]?[0-9]{3}[)]?[-\s\.]?[0-9]{3}[-\s\.]?[0-9]{4,6}$/.test($(e)),c.website=e=>/^(https?:\/\/)?(www\.)?([a-zA-Z0-9]+(-?[a-zA-Z0-9])*\.)+[\w]{2,}(\/\S*)?$/.test($(e)),c.url=e=>/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()!@:%_\+.~#?&\/\/=]*)/.test($(e)),c.number=e=>parseFloat(e)==e,c.integer=e=>Number.isInteger(Number(e)),c.wholenumber=e=>c.integer(e)&&Number(e)>0,c.date=e=>k(e,d[0]),c.date[d[0]]=e=>k(e,d[0]),c.date[d[1]]=e=>k(e,d[1]),c.date[d[2]]=e=>k(e,d[2]);let g={};g.formData=e=>h[N(e)].map(t=>Object.getOwnPropertyNames(t).reduce((n,a)=>({...n,[a]:t[a]}),{})),g.updateFormData=(e,t)=>S(b(e),t),g.toggleErrorMessage=(e,t,n)=>D(b(e),t,n),g.submit=e=>{var t;(t=h[e.target])==null||t.forEach(n=>{if(n.valid===!1){let a=n.group?{errorNode:n.node.parentNode.parentNode}:{};D(n.node,!1,a),e.preventDefault(),console.error(`${n.name} not valid`)}})},g.isComplete=e=>{var t,n;return!((n=(t=h[N(b(e))])==null?void 0:t.filter(a=>a.set===b(e)))==null?void 0:n.some(a=>!a.valid))},Object.keys(c).forEach(e=>g={...g,[e]:c[e]}),F.magic(q,()=>g),F.directive(q,(e,{modifiers:t,expression:n},{evaluate:a})=>{let i=N(e);w[i]=w[i]||[];let l=[...t,...w[i]],s=(r,u=l)=>u.includes(r),p=r=>s("required")||r.hasAttribute("required")||!1;function O(r,u){let o={value:r.value,valid:!p(r)};return f(u)&&(o={...o,set:u}),x(r)&&(o={...o,value:""}),x(r)&&s("group")&&(o={...o,valid:!1,group:!0}),o}function V(r){r.type==="checkbox"&&s("group")?y(r,"click",_):Z(r)?y(r,"click",E):f(r,"select")?y(r,"change",E):(y(r,"blur",E),s("input")&&y(r,"input",E))}if(f(e,"form")){w[i]=t;let r=e.querySelectorAll("fieldset");(r.length>0?r:[e]).forEach(o=>{P(o).forEach(m=>{S(m,O(m,o)),m.getAttributeNames().some(A=>A.includes("x-validate"))||V(m)})})}M(e)&&(S(e,O(e)),V(e));function E(){let r=this,u=[r.type];M(e)&&(u=[...u,...t]);let o=r.checkValidity();if(p(r)&&(I(r.value)||x(r)&&!r.checked)&&(o=!1),!I(r.value)){for(let v of u)if(typeof c[v]=="function")if(v==="date"){let m=d[0];d.forEach(A=>{u.includes(A)&&(m=A)}),o=o&&c.date[m](r.value);break}else{o=o&&c[v](r.value);break}M(e)&&(n&&a(n))===!1&&(o=!1)}return D(r,o),S(r,{value:r.value,valid:o}),!o&&f(r,"input, textarea")&&!Z(r)&&!s("bluronly")&&y(r,"input",E),!o&&s("refocus")&&r.focus(),o}function _(){var m;let r=this,u=((m=h[N(r)].filter(A=>A.name===r.name)[0].array)==null?void 0:m.length)||0;u=r.checked?u+1:u-1;let o=parseInt(n&&a(n))||1,v=u>=o;D(r,v,{errorNode:r.parentNode.parentNode})}});function D(e,t,n={}){let{errorNode:a,errorMsg:i}=n,l=j(e)||"";a=a||R(e,".error-msg")||e.parentNode,i=i||L(e,"data-error-msg")||`${l} required`,t?(a.removeAttribute("data-error"),e.removeAttribute("invalid")):(T(a,"data-error",i),T(e,"invalid"))}},C=G;document.addEventListener("alpine:init",()=>{window.Alpine.plugin(C)});})();
