(()=>{var tt=function(w){let T="data-error",V=`${T}-msg`,S="error-msg",F="validate",_="required",I="input",C="checkbox",z="radio",R="group",x="form",Z="fieldset",H=t=>`:not([type="${t}"])`,h=`${I}${H("search")}${H("reset")}${H("submit")},select,textarea`,j="hidden",g=(t,e)=>{let r=t instanceof HTMLElement;return e?r&&t.matches(e):r},b=(t,e)=>Array.isArray(t)&&t.includes(e),O=(t,e,r)=>t.addEventListener(e,r),v=(t,e)=>t.getAttribute(e),E=(t,e,r="")=>t.setAttribute(e,r),A=(t,e=document)=>g(t)?t:e.querySelector(`#${t}`)||e.querySelector(`[name ="${t}"]`),D=t=>t&&t.closest(x),M=t=>v(t,"name")||v(t,"id"),K=t=>{let e=v(t,"id");if(e)return e;let r=`${t.tagName.toLowerCase()}-${Math.random().toString(36).substring(2,9)}`;return E(t,"id",r),r},L=t=>String(t).trim(),p=t=>{let e=A(t),r=N.get(D(e));if(!r)return!1;if(g(e,x))return Object.values(r);if(g(e,Z)){let a=e.querySelectorAll(h);return Object.values(r).filter(s=>Array.from(a).some(f=>s.node===f))}if(g(e,h))return r[M(e)]},k=["mmddyyyy","ddmmyyyy","yyyymmdd"],Q=/^(\d{1,2})[-/.](\d{1,2})[-/.](\d{4})$/,X=/^(\d{4})[-/.](\d{1,2})[-/.](\d{1,2})$/;function G(t,e=k[2]){let r=t.split(/[-/.]/),a=k.indexOf(e),s,f,u;Q.test(t)?(a===0&&([s,f,u]=r),a===1&&([f,s,u]=r)):X.test(t)&&a===2&&([u,s,f]=r);let y=`${u}-${s}-${f}`,o=new Date(y),n=o.getTime();return!typeof n==="number"||Number.isNaN(n)?!1:o.toISOString().startsWith(y)}let N=new WeakMap,P=new WeakMap;function $(t,e,r){var f;console.log("\u{1F680} ~ updateFieldData",t,e);let a=D(t),s=M(t);if(a&&s){N.has(a)||N.set(a,w.reactive({}));let u=N.get(a),y=t.matches(":disabled"),o=((f=u[s])==null?void 0:f.required)||t.required;e={...u[s],name:s,node:t,value:y?"":t.value,required:o,disabled:y,...e};let n=e.value,c=t.checkValidity();if(!e.disabled&&c){if(b([C,z],t.type)){e.required&&(c=t.checked);let i=e.array||[];if(t.type===C&&(t.checked&&!i.includes(n)&&i.push(n),t.checked||(i=i.filter(d=>d!==n))),t.type===z&&t.checked&&(i=[n]),e.array=i,e.value=i.toString(),b(e.mods,R)){let d=e.exp||1;c=i.length>=d}}else if(e.required&&(c=!!n.trim()),c&&n){let i=e.mods.filter(d=>k.indexOf(d)!==-1)[0];for(let d of e.mods)if(typeof m[d]=="function"){c=d==="date"?G(n,i):m[d](n);break}e.exp===!1&&(c=!1)}}e.valid=c,u[s]=e,N.set(a,u)}return r&&U(t,e.valid),e}function q(t,e,r){if((g(t,x)||g(t,Z))&&p(t).forEach(s=>$(s.node)),g(t,h))return $(t,e,r)}let m={};m.email=t=>/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(L(t)),m.tel=t=>/^((\+|0)\d{1,4})?[-\s.]?[-\s.]?\d[-\s.]?\d[-\s.]?\d[-\s.]?\d[-\s.]?\d[-\s.]?\d[-\s.]?\d[-\s.]?\d[-\s.]?(\d{1,2})$/.test(L(t)),m.website=t=>/^(https?:\/\/)?(www\.)?([-a-zA-Z0-9@:%._+~#=]+(-?[a-zA-Z0-9])*\.)+[\w]{2,}(\/\S*)?$/.test(L(t)),m.url=t=>/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()!@:%_+.~#?&/=]*)/.test(L(t)),m.number=t=>!isNaN(parseFloat(t))&&isFinite(t),m.integer=t=>m.number(t)&&Number.isInteger(Number(t)),m.wholenumber=t=>m.integer(t)&&Number(t)>0,m.date=t=>G(t),k.forEach(t=>{m.date[t]=e=>G(e,t)});let l={};l.data=t=>p(t),l.formData=t=>N.get(D(A(t))),l.value=(t,e)=>{t=A(t);let r=p(t);return r?Array.isArray(r)?r.reduce((a,s)=>(a[s.name]=s.value,a),{}):(e&&(r.value=e,t.value=e,$(t)),r.value):!1},l.updateData=(t,e,r)=>q(A(t),e,r),l.toggleError=(t,e)=>U(A(t),e),l.submit=t=>{let e=0;p(t.target).forEach(r=>{r=q(r.node),r.valid===!1&&(e++,e===1&&r.node.focus(),U(r.node,!1),t.preventDefault(),console.error(`${r.name} ${_}`))})},l.isComplete=t=>{let e=p(t);return Array.isArray(e)?!e.some(r=>!r.valid):e&&e.valid},Object.keys(m).forEach(t=>l={...l,[t]:m[t]}),w.magic(F,()=>l),w.magic("formData",t=>N.get(D(A(t)))),w.directive(F,(t,{modifiers:e,expression:r},{evaluate:a})=>{let s=o=>{let n=new MutationObserver(c=>{for(let i of c){let d=i.target;if(i.type==="attributes"){let B=i.attributeName;d.matches(h)&&["disabled","required","value"].includes(B)&&q(d),d.matches(Z)&&B==="disabled"&&q(d)}}});return n.observe(o,{attributes:!0,childList:!0,subtree:!0}),n},f=o=>{let n=o.closest(".field-parent")||b(e,R)?o.parentNode.parentNode:o.parentNode,c=[...e,o.type],i=o.required||b(c,_)||b(c,R),d=o.matches(":disabled");return{mods:c,required:i,disabled:d,parentNode:n,exp:r&&a(r)}};function u(o){Y(o);let n=b([C,z,"range"],o.type),c=n?"click":g(o,"select")?"change":"blur";O(o,c,y),b(e,I)&&!n&&O(o,I,y)}if(g(t,x)){s(t),e.includes("use-browser")||E(t,"novalidate","true"),e.includes("validate-on-submit")&&t.addEventListener("submit",function(n){l.submit(n)}),P.set(t,e);let o=t.querySelectorAll(h);O(t,"reset",()=>{t.reset();let n=p(t);setTimeout(()=>{n.forEach(c=>$(c.node))},50)}),o.forEach(n=>{M(n)&&($(n,f(n)),n.getAttributeNames().some(c=>c.includes(`x-${F}`))||u(n))})}if(M(t)&&g(t,h)){let o=D(t),n=P.has(o)?P.get(o):[];e=[...e,...n],$(t,f(t)),u(t),o.hasAttribute("x-validate")||s(t)}function y(o){let n=this,c=p(n).mods,i=$(n,{exp:r&&a(r)},!0);return!i.valid&&!b(c,"bluronly")&&o.type==="blur"&&O(n,I,y),!i.valid&&b(c,"refocus")&&n.focus(),i.valid}});function U(t,e){let r=p(t).parentNode,a=document.getElementById(v(t,"aria-errormessage"));E(t,"aria-invalid",!e),e?(E(a,j),r.removeAttribute(T)):(a.removeAttribute(j),E(r,T,a.textContent))}function J(t){for(;t;){if(t=t.nextElementSibling,g(t,`.${S}`))return t;if(g(t,h))return!1}return!1}function Y(t){let e=p(t),r=b(e.mods,R)?e.parentNode:t,a=document.createElement("span");a.className=S;let s=document.getElementById(`${S}-${v(r,"id")}`)||J(r)||a,f=K(r),u=`${S}-${f}`;v(s,"id")!==u&&E(s,"id",u),E(s,j);let y=M(t);s.innerHTML||(s.textContent=v(r,V)||`${y.replace(/[-_]/g," ")} ${_}`),E(t,"aria-errormessage",u),A(u,D(t))||r.after(s)}},W=tt;document.addEventListener("alpine:init",()=>{window.Alpine.plugin(W)});})();
