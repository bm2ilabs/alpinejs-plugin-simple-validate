(()=>{var R=function(S){let M="validate",I=e=>e.matches("input,textarea,select"),C=e=>e.querySelectorAll("input, select, text"),z=e=>["checkbox","radio","range"].includes(e.type),L=e=>["checkbox","radio"].includes(e.type),Z=e=>["button","reset","submit","search"].includes(e.type),l=(e,t,r)=>e.addEventListener(t,r),k=(e,t)=>e.getAttribute(t),b=e=>e.matches("form")?k(e,"id"):k(e.closest("form"),"id"),q=(e,t,r="")=>e.setAttribute(t,r);function P(e,t){var r=e.nextElementSibling;return!t||(r==null?void 0:r.matches(t))?r:!1}let w=e=>e.name||k(e,"id"),d=["mmddyyyy","ddmmyyyy","yyyymmdd"],h=e=>String(e).trim(),O=e=>h(e)==="";function x(e,t){let[r,i,n]=e.split(/[-\/.]/),u;if(t===d[0]&&/^(\d{1,2})[-\/.](\d{1,2})[-\/.](\d{4})$/.test(e))u=`${n}-${r}-${i}`;else if(t===d[1]&&/^(\d{1,2})[-\/.](\d{1,2})[-\/.](\d{4})$/.test(e))u=`${n}-${i}-${r}`;else if(t===d[2]&&/^(\d{4})[-\/.](\d{1,2})[-\/.](\d{1,2})$/.test(e))u=`${r}-${i}-${n}`;else return!1;let m=new Date(u),$=m.getTime();return typeof $!="number"||Number.isNaN($)?!1:m.toISOString().startsWith(u)}let g=S.reactive({}),D={};function N(e,t){if(typeof e=="string"&&t.name){let r=g[e]||[];if(r.some(i=>i.name===t.name)){let i=r.filter(n=>n.name===t.name)[0];if(r=r.filter(n=>n.name!==t.name),i.type==="checkbox"){let n=i.array||[];t.value!==""&&(n=n.some(u=>u===t.value)?n.filter(u=>u!==t.value):[...n,t.value]),t={...i,...t,array:n,value:n.toString()}}else t={...i,...t}}r.push(t),g[e]=r}}let c={};c.email=e=>/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(h(e)),c.tel=e=>/^[\+]?[(]?[0-9]{3}[)]?[-\s\.]?[0-9]{3}[-\s\.]?[0-9]{4,6}$/.test(h(e)),c.website=e=>/^(https?:\/\/)?(www\.)?([a-zA-Z0-9]+(-?[a-zA-Z0-9])*\.)+[\w]{2,}(\/\S*)?$/.test(h(e)),c.url=e=>/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()!@:%_\+.~#?&\/\/=]*)/.test(h(e)),c.number=e=>Number(e),c.wholenumber=e=>Number.isInteger(Number(e))&&Number(e)>0,c.integer=e=>Number.isInteger(Number(e)),c.date=e=>x(e,d[0]),c.date[d[0]]=e=>x(e,d[0]),c.date[d[1]]=e=>x(e,d[1]),c.date[d[2]]=e=>x(e,d[2]);let f={};f.formData=e=>g[e].map(t=>Object.getOwnPropertyNames(t).reduce((r,i)=>({...r,[i]:t[i]}),{})),f.updateFormData=(e,t)=>N(e,t),f.toggleErrorMessage=(e,t,r)=>E(e,t,r),f.isFormComplete=e=>g[e].map(r=>Object.getOwnPropertyNames(r).reduce((i,n)=>({...i,[n]:r[n]}),{})).every(r=>r.valid===!0),f.submit=e=>{let t=e.target,r=b(t);g[r].forEach(i=>{if(i.valid===!1){let n=document.querySelector(`#${r} [name='${i.name}'], #${r} input#${i.name}`),u=i.group?{errorNode:n.parentNode.parentNode}:{};E(n,!1,u),e.preventDefault(),console.error(`${r}:${i.name} not valid`)}})},Object.keys(c).forEach(e=>{f={...f,[e]:c[e]}}),S.magic(M,()=>f),S.directive(M,(e,{modifiers:t,expression:r},{evaluate:i})=>{let n=b(e);D[n]=D[n]||[];let u=[...t,...D[n]],m=(a,o=u)=>o.includes(a),$=a=>m("required")||a.hasAttribute("required")||!1;function j(a){let o={name:w(a),type:a.type,value:a.value,valid:!$(a)};return a.type==="checkbox"&&(o={...o,value:"",array:[]}),a.type==="radio"&&(o={...o,value:""}),o}if(e.matches("form")){let a=C(e);D[n]=t,a.forEach(o=>{let p=o.getAttributeNames().some(s=>s.includes("x-validate"));!Z(o)&&!p&&(N(n,j(o)),z(o)?l(o,"click",y):(l(o,"blur",y),m("input")&&l(o,"input",y)))})}if(I(e)&&!Z(e)){let a=b(e),o=j(e);if(e.type==="checkbox"&&m("group")){let p=function(){let s=g[a].filter(F=>F.name===e.name)[0].array.length;s=e.checked?s+1:s-1;let v=parseInt(r&&i(r))||1,A=s>=v;E(e,A,{errorNode:e.parentNode.parentNode}),N(a,{name:w(e),value:e.value,valid:A})};o={...o,valid:!1,group:!0},l(e,"click",p)}else z(e)?(l(e,"click",y),e.type==="radio"&&m("group")&&(o={...o,value:"",valid:!1})):(l(e,"blur",y),m("input")&&l(e,"input",y));N(b(e),o)}function y(){let a=this,o=b(a),p=[a.type];I(e)&&(p=[...p,...t]);let s=a.checkValidity();if($(a)&&(O(a.value)||L(a)&&!a.checked)&&(s=!1),!O(a.value)){for(let v of p)if(typeof c[v]=="function")if(v==="date"){let A=d[0];d.forEach(F=>{p.includes(F)&&(A=F)}),s=s&&c.date[A](a.value);break}else{s=s&&c[v](a.value);break}I(e)&&(r&&i(r))===!1&&(s=!1)}return E(a,s),N(o,{name:w(a),value:a.value,valid:s}),!s&&a.matches("input, textarea")&&!z(a)&&!m("bluronly")&&l(a,"input",y),!s&&m("refocus")&&a.focus(),s}});function E(e,t,r={}){let{errorNode:i,errorMsg:n}=r,u=w(e)||"";i=i||P(e,".error-msg")||e.parentNode,n=n||k(e,"data-error-msg")||`${u} required`,t?(i.removeAttribute("data-error"),e.removeAttribute("invalid")):(q(i,"data-error",n),q(e,"invalid",""))}},V=R;document.addEventListener("alpine:init",()=>{window.Alpine.plugin(V)});})();
