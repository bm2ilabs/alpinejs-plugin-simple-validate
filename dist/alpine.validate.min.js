(()=>{var ut=function(w){let Z="data-error-msg",H="data-error",P="error-msg",U="aria-invalid",rt="aria-errormessage",j="validate",v="required",L="input",O="checkbox",B="radio",K="group",S="form",Q="fieldset",W='input:not([type="button"]):not([type="search"]):not([type="reset"]):not([type="submit"]),select,textarea',T="hidden",p=(t,e)=>e?t instanceof HTMLElement&&t.matches(e):t instanceof HTMLElement,X=t=>p(t,W),_=(t,e)=>typeof t===e,d=(t,e)=>t.includes(e),J=(t,e)=>t.querySelectorAll(e),C=t=>d([O,B,"range"],t.type),Y=t=>d([O,B],t.type),q=t=>t.type===O,x=(t,e,s)=>t.addEventListener(e,s),z=(t,e)=>t.getAttribute(e),b=(t,e,s="")=>t.setAttribute(e,s),h=t=>_(t,"string")?document.getElementById(t):p(t)?t:!1,G=t=>p(h(t),S)?t:p(h(t))?t.closest(S):!1,M=t=>t.name||z(t,"id"),k=t=>String(t).trim(),y=t=>{t=h(t);let e=nt[G(t)]||[];return p(t,Q)?e.filter(s=>s.set===t):X(t)?e.filter(s=>s.name===M(t))[0]:e};function at(t,e){var s=t.nextElementSibling;return!e||p(s,e)?s:!1}let tt=t=>`error-msg-${t}`,N=["mmddyyyy","ddmmyyyy","yyyymmdd"];function et(t,e){let[s,m,o]=t.split(/[-/.]/),r;if(e===N[0]&&/^(\d{1,2})[-/.](\d{1,2})[-/.](\d{4})$/.test(t))r=`${o}-${s}-${m}`;else if(e===N[1]&&/^(\d{1,2})[-/.](\d{1,2})[-/.](\d{4})$/.test(t))r=`${o}-${m}-${s}`;else if(e===N[2]&&/^(\d{4})[-/.](\d{1,2})[-/.](\d{1,2})$/.test(t))r=`${s}-${m}-${o}`;else return!1;let a=new Date(r),A=a.getTime();return!_(A,"number")||Number.isNaN(A)?!1:a.toISOString().startsWith(r)}let nt=w.reactive({}),F={};function I(t,e,s){let m=G(t),o=M(t);if(e={name:o,node:t,value:t.value,...e},p(m,S)&&o){let r=y(m);if(r.some(a=>a.name===o)){e={...y(t),...e};let a=e.value,A=!a.trim();if(s===!0&&(e.mods=[...e.mods,v],e.valid=!A&&e.valid),s===!1&&(e.mods=e.mods.filter(u=>u!==v),e.valid=A?!0:e.valid),q(t)&&!a){let u=e.array;u=u.some(n=>n===a)?u.filter(n=>n!==a):[...u,a],e={...e,array:u,value:u.toString()}}r=r.map(u=>u.name===o?e:u)}else r.push(e);nt[m]=r}}let c={};c.email=t=>/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(k(t)),c.tel=t=>/^[+]?[(]?[0-9]{3}[)]?[-\s.]?[0-9]{3}[-\s.]?[0-9]{4,6}$/.test(k(t)),c.website=t=>/^(https?:\/\/)?(www\.)?([a-zA-Z0-9]+(-?[a-zA-Z0-9])*\.)+[\w]{2,}(\/\S*)?$/.test(k(t)),c.url=t=>/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()!@:%_+.~#?&/=]*)/.test(k(t)),c.number=t=>!isNaN(parseFloat(t))&&isFinite(t),c.integer=t=>c.number(t)&&Number.isInteger(Number(t)),c.wholenumber=t=>c.integer(t)&&Number(t)>0,c.date=t=>et(t,N[0]),N.forEach(t=>{c.date[t]=e=>et(e,t)});let E={};E.data=t=>y(t),E.updateData=(t,e)=>I(h(t),e),E.makeRequired=(t,e)=>I(h(t),{},e),E.isRequired=t=>d(y(t).mods,v),E.toggleError=(t,e)=>V(h(t),e),E.submit=t=>{y(t.target).forEach(e=>{e.valid===!1&&(V(e.node,!1),t.preventDefault(),console.error(`${e.name} not valid`))})},E.isComplete=t=>!y(t).some(e=>!e.valid),Object.keys(c).forEach(t=>E={...E,[t]:c[t]}),w.magic(j,()=>E),w.directive(j,(t,{modifiers:e,expression:s},{evaluate:m})=>{let o=G(t);F[o]=F[o]||[];let r=[...e,...F[o]],a=(n,f)=>{let R=g=>d(r,v)||d(r,K)||g.hasAttribute(v)||!1,l={array:q(n)&&[],value:Y(n)?"":n.value,valid:!R(n),mods:r};return f&&(l={...l,set:f}),l};function A(n){let f=C(n)?"click":p(n,"select")?"change":"blur";x(n,f,u),d(r,L)&&!C(n)&&x(n,L,u)}if(p(t,S)){F[o]=e;let n=J(t,Q);(n.length>0?n:[t]).forEach(R=>{J(R,W).forEach(g=>{I(g,a(g,R)),g.getAttributeNames().some(i=>d(i,"x-validate"))||(A(g),st(g))})})}X(t)&&(I(t,a(t)),st(t),A(t));function u(){let n=this,f=n.value.trim(),R=y(n),l=[n.type,...R.mods];n.hasAttribute(v)&&(l=[...l,v]);let g=d(l,v),i=!0;if(q(n)&&d(l,K)){let $=R.array.length;$=n.checked?$+1:$-1;let D=parseInt(s&&m(s))||1;i=$>=D}else if(i=n.checkValidity(),console.log("\u{1F680} checkIfValid 0",g,i,!f,!n.checked,g&&(!f||!n.checked)),g&&(!f||Y(n)&&!n.checked)&&(i=!1),console.log("\u{1F680} checkIfValid 1",i),i&&f){for(let D of l)if(_(c[D],"function")){if(D==="date"){let it=l.filter(ct=>N.indexOf(ct)!==-1);i=c.date[it[0]||N[0]](f)}else i=c[D](f);break}(s&&m(s))===!1&&(i=!1)}return console.log("\u{1F680} checkIfValid 2",i),V(n,i),I(n,{value:n.value,valid:i}),!i&&p(n,"input, textarea")&&!C(n)&&!d(l,"bluronly")&&x(n,L,u),!i&&d(l,"refocus")&&n.focus(),i}});function V(t,e){let s=M(t),o=d(y(t).mods,"group")?t.parentNode.parentNode:t.parentNode,r=z(t,Z)||`${s} required`,a=h(tt(s));e?(b(t,U,"false"),a&&b(a,T),o.removeAttribute(H)):(b(t,U,"true"),a&&a.removeAttribute(T),b(o,H,r))}function st(t){let e=M(t),s=d(y(t).mods,"group")?t.parentNode.parentNode:t,m=document.createElement("span");m.className=P;let o=at(s,`.${P}`)||m,r=tt(e);b(o,"id",r),b(o,T),o.innerHTML||(o.textContent=z(t,Z)||`${e} required`),b(t,rt,r),h(r)||s.after(o)}},ot=ut;document.addEventListener("alpine:init",()=>{window.Alpine.plugin(ot)});})();
