(()=>{var H=function(F){let x="validate",z='input:not([type="button"]):not([type="search"]):not([type="reset"]),select,textarea',D=e=>e.matches(z),C=e=>e.querySelectorAll(z),M=e=>["checkbox","radio","range"].includes(e.type),q=e=>["checkbox","radio"].includes(e.type),p=(e,t,r)=>e.addEventListener(t,r),Z=(e,t)=>e.getAttribute(t),A=e=>typeof e=="string"?document.querySelector(`form#${e}`):e.matches("form")?e:e.closest("form"),$=e=>typeof e=="string"?document.querySelector(`#${e}`):e instanceof HTMLElement?e:!1,L=(e,t,r="")=>e.setAttribute(t,r);function R(e,t){var r=e.nextElementSibling;return!t||(r==null?void 0:r.matches(t))?r:!1}let O=e=>e.name||Z(e,"id"),N=e=>String(e).trim(),j=e=>N(e)==="",f=["mmddyyyy","ddmmyyyy","yyyymmdd"];function k(e,t){let[r,a,s]=e.split(/[-\/.]/),u;if(t===f[0]&&/^(\d{1,2})[-\/.](\d{1,2})[-\/.](\d{4})$/.test(e))u=`${s}-${r}-${a}`;else if(t===f[1]&&/^(\d{1,2})[-\/.](\d{1,2})[-\/.](\d{4})$/.test(e))u=`${s}-${a}-${r}`;else if(t===f[2]&&/^(\d{4})[-\/.](\d{1,2})[-\/.](\d{1,2})$/.test(e))u=`${r}-${a}-${s}`;else return!1;let i=new Date(u),m=i.getTime();return typeof m!="number"||Number.isNaN(m)?!1:i.toISOString().startsWith(u)}let h=F.reactive({}),E={};function w(e,t){let r=A(e),a=O(e);if(t={name:a,node:e,value:e.value,...t},r&&r.nodeName==="FORM"&&a){let s=h[r]||[];if(s.some(u=>u.name===a)){let u=s.filter(i=>i.name===a)[0];if(s=s.filter(i=>i.name!==a),u.type==="checkbox"){let i=u.array||[];t.value!==""&&(i=i.some(m=>m===e.value)?i.filter(m=>m!==t.value):[...i,t.value]),t={...u,...t,array:i,value:i.toString()}}else t={...u,...t}}s.push(t),h[r]=s}}let c={};c.email=e=>/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(N(e)),c.tel=e=>/^[\+]?[(]?[0-9]{3}[)]?[-\s\.]?[0-9]{3}[-\s\.]?[0-9]{4,6}$/.test(N(e)),c.website=e=>/^(https?:\/\/)?(www\.)?([a-zA-Z0-9]+(-?[a-zA-Z0-9])*\.)+[\w]{2,}(\/\S*)?$/.test(N(e)),c.url=e=>/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()!@:%_\+.~#?&\/\/=]*)/.test(N(e)),c.number=e=>parseFloat(e)==e,c.integer=e=>Number.isInteger(Number(e)),c.wholenumber=e=>c.integer(e)&&Number(e)>0,c.date=e=>k(e,f[0]),c.date[f[0]]=e=>k(e,f[0]),c.date[f[1]]=e=>k(e,f[1]),c.date[f[2]]=e=>k(e,f[2]);let g={};g.formData=e=>h[A(e)].map(t=>Object.getOwnPropertyNames(t).reduce((r,a)=>({...r,[a]:t[a]}),{})),g.updateFormData=(e,t)=>w($(e),t),g.toggleErrorMessage=(e,t,r)=>S($(e),t,r),g.submit=e=>{var t;(t=h[e.target])==null||t.forEach(r=>{if(r.valid===!1){let a=r.group?{errorNode:r.node.parentNode.parentNode}:{};S(r.node,!1,a),e.preventDefault(),console.error(`${r.name} not valid`)}})},g.isComplete=e=>{var t,r;return!((r=(t=h[A($(e))])==null?void 0:t.filter(a=>a.set===$(e)))==null?void 0:r.some(a=>!a.valid))},Object.keys(c).forEach(e=>g={...g,[e]:c[e]}),F.magic(x,()=>g),F.directive(x,(e,{modifiers:t,expression:r},{evaluate:a})=>{let s=A(e);E[s]=E[s]||[];let u=[...t,...E[s]],i=(n,l=u)=>l.includes(n),m=n=>i("required")||n.hasAttribute("required")||!1;function I(n,l){let o={value:n.value,valid:!m(n)};return l instanceof HTMLElement&&(o={...o,set:l}),q(n)&&(o={...o,value:""}),q(n)&&i("group")&&(o={...o,valid:!1,group:!0}),o}if(e.matches("form")){E[s]=t;let n=e.querySelectorAll("fieldset");(n.length>0?n:[e]).forEach(o=>{C(o).forEach(d=>{w(d,I(d,o)),d.getAttributeNames().some(b=>b.includes("x-validate"))||(M(d)?p(d,"click",y):(p(d,"blur",y),i("input")&&p(d,"input",y)))})})}D(e)&&(w(e,I(e)),e.type==="checkbox"&&i("group")?p(e,"click",V):M(e)?p(e,"click",y):(p(e,"blur",y),i("input")&&p(e,"input",y)));function y(){let n=this,l=[n.type];D(e)&&(l=[...l,...t]);let o=n.checkValidity();if(m(n)&&(j(n.value)||q(n)&&!n.checked)&&(o=!1),!j(n.value)){for(let v of l)if(typeof c[v]=="function")if(v==="date"){let d=f[0];f.forEach(b=>{l.includes(b)&&(d=b)}),o=o&&c.date[d](n.value);break}else{o=o&&c[v](n.value);break}D(e)&&(r&&a(r))===!1&&(o=!1)}return S(n,o),w(n,{value:n.value,valid:o}),!o&&n.matches("input, textarea")&&!M(n)&&!i("bluronly")&&p(n,"input",y),!o&&i("refocus")&&n.focus(),o}function V(){var d;let n=this,l=((d=h[A(n)].filter(b=>b.name===n.name)[0].array)==null?void 0:d.length)||0;l=n.checked?l+1:l-1;let o=parseInt(r&&a(r))||1,v=l>=o;S(n,v,{errorNode:n.parentNode.parentNode})}});function S(e,t,r={}){let{errorNode:a,errorMsg:s}=r,u=O(e)||"";a=a||R(e,".error-msg")||e.parentNode,s=s||Z(e,"data-error-msg")||`${u} required`,t?(a.removeAttribute("data-error"),e.removeAttribute("invalid")):(L(a,"data-error",s),L(e,"invalid"))}},T=H;document.addEventListener("alpine:init",()=>{window.Alpine.plugin(T)});})();
