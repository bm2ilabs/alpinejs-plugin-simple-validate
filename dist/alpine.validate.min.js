(()=>{var it=function(w){let Y="data-error-msg",Z="data-error",G="error-msg",H="validate",p="required",T="input",k="checkbox",P="radio",U="group",S="form",tt="fieldset",j='input:not([type="button"]):not([type="search"]):not([type="reset"]):not([type="submit"]),select,textarea',L="hidden",f=(t,e)=>e?t instanceof HTMLElement&&t.matches(e):t instanceof HTMLElement,V=t=>f(t,j),O=(t,e)=>typeof t===e,u=(t,e)=>t.includes(e),et=(t,e)=>t.querySelectorAll(e),C=t=>u([k,P,"range"],t.type),B=t=>u([k,P],t.type),_=t=>t.type===k,x=(t,e,s)=>t.addEventListener(e,s),K=(t,e)=>t.getAttribute(e),A=(t,e,s="")=>t.setAttribute(e,s),y=t=>O(t,"string")?document.getElementById(t):f(t)?t:!1,q=t=>f(y(t),S)?t:f(y(t))?t.closest(S):!1,M=t=>t.name||K(t,"id"),I=t=>String(t).trim(),v=t=>{t=y(t);let e=X[q(t)]||[];return f(t,tt)?e.filter(s=>s.set===t):V(t)?e.filter(s=>s.name===M(t))[0]:e};function nt(t,e){var s=t.nextElementSibling;return!e||f(s,e)?s:!1}let Q=t=>`error-msg-${t}`,h=["mmddyyyy","ddmmyyyy","yyyymmdd"];function W(t,e){let[s,c,o]=t.split(/[-/.]/),r;if(e===h[0]&&/^(\d{1,2})[-/.](\d{1,2})[-/.](\d{4})$/.test(t))r=`${o}-${s}-${c}`;else if(e===h[1]&&/^(\d{1,2})[-/.](\d{1,2})[-/.](\d{4})$/.test(t))r=`${o}-${c}-${s}`;else if(e===h[2]&&/^(\d{4})[-/.](\d{1,2})[-/.](\d{1,2})$/.test(t))r=`${s}-${c}-${o}`;else return!1;let m=new Date(r),E=m.getTime();return!O(E,"number")||Number.isNaN(E)?!1:m.toISOString().startsWith(r)}let X=w.reactive({}),F={};function R(t,e,s){let c=q(t),o=M(t);if(e={name:o,node:t,value:t.value,...e},f(c,S)&&o){let r=v(c);if(r.some(m=>m.name===o)){e={...v(t),...e};let m=e.value,E=!m.trim();if(s===!0&&(e.mods=[...e.mods,p],e.valid=!E&&e.valid),s===!1&&(e.mods=e.mods.filter(i=>i!==p),e.valid=E?!0:e.valid),_(t)&&!m){let i=e.array;i=i.some(n=>n===m)?i.filter(n=>n!==m):[...i,m],e={...e,array:i,value:i.toString()}}r=r.map(i=>i.name===o?e:i)}else r.push(e);X[c]=r}}let a={};a.email=t=>/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(I(t)),a.tel=t=>/^[+]?[(]?[0-9]{3}[)]?[-\s.]?[0-9]{3}[-\s.]?[0-9]{4,6}$/.test(I(t)),a.website=t=>/^(https?:\/\/)?(www\.)?([a-zA-Z0-9]+(-?[a-zA-Z0-9])*\.)+[\w]{2,}(\/\S*)?$/.test(I(t)),a.url=t=>/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()!@:%_+.~#?&/=]*)/.test(I(t)),a.number=t=>!isNaN(parseFloat(t))&&isFinite(t),a.integer=t=>a.number(t)&&Number.isInteger(Number(t)),a.wholenumber=t=>a.integer(t)&&Number(t)>0,a.date=t=>W(t,h[0]),h.forEach(t=>{a.date[t]=e=>W(e,t)});let g={};g.data=t=>v(t),g.updateData=(t,e)=>R(y(t),e),g.makeRequired=(t,e)=>R(y(t),{},e),g.isRequired=t=>u(v(t).mods,p)||y(t).hasAttribute(p),g.toggleError=(t,e)=>z(y(t),e),g.submit=t=>{v(t.target).forEach(e=>{e.valid===!1&&(z(e.node,!1),t.preventDefault(),console.error(`${e.name} not valid`))})},g.isComplete=t=>!v(t).some(e=>!e.valid),Object.keys(a).forEach(t=>g={...g,[t]:a[t]}),w.magic(H,()=>g),w.directive(H,(t,{modifiers:e,expression:s},{evaluate:c})=>{let o=q(t);F[o]=F[o]||[];let r=[...e,...F[o]],m=n=>{let d=N=>u(r,p)||u(r,U)||N.hasAttribute(p)||!1;return{array:_(n)&&[],value:B(n)?"":n.value,valid:!d(n),mods:r,set:n.closest("fieldset")}};function E(n){st(n);let d=C(n)?"click":f(n,"select")?"change":"blur";x(n,d,i),u(r,T)&&!C(n)&&x(n,T,i)}f(t,S)&&(F[o]=e,et(t,j).forEach(d=>{R(d,m(d)),d.getAttributeNames().some(N=>u(N,"x-validate"))||E(d)})),V(t)&&(R(t,m(t)),E(t));function i(){let n=this,d=n.value.trim(),N=v(n),b=[n.type,...N.mods];n.hasAttribute(p)&&(b=[...b,p]);let rt=u(b,p),l=!0;if(_(n)&&u(b,U)){let $=N.array.length;$=n.checked?$+1:$-1;let D=parseInt(s&&c(s))||1;l=$>=D}else if(l=n.checkValidity(),rt&&(!d||B(n)&&!n.checked)&&(l=!1),l&&d){for(let D of b)if(O(a[D],"function")){if(D==="date"){let ot=b.filter(at=>h.indexOf(at)!==-1);l=a.date[ot[0]||h[0]](d)}else l=a[D](d);break}(s&&c(s))===!1&&(l=!1)}return z(n,l),R(n,{value:n.value,valid:l}),!l&&f(n,"input, textarea")&&!C(n)&&!u(b,"bluronly")&&x(n,T,i),!l&&u(b,"refocus")&&n.focus(),l}});function z(t,e){let s=M(t),o=u(v(t).mods,"group")?t.parentNode.parentNode:t.parentNode,r=y(Q(s));A(t,"aria-invalid",!e),e?(A(r,L),o.removeAttribute(Z)):(r.removeAttribute(L),A(o,Z,r.textContent))}function st(t){let e=M(t),s=u(v(t).mods,"group")?t.parentNode.parentNode:t,c=document.createElement("span");c.className=G;let o=nt(s,`.${G}`)||c,r=Q(e);A(o,"id",r),A(o,L),o.innerHTML||(o.textContent=K(t,Y)||`${e.replace(/[-_]/g," ")} required`),A(t,"aria-errormessage",r),y(r)||s.after(o)}},J=it;document.addEventListener("alpine:init",()=>{window.Alpine.plugin(J)});})();
