(()=>{var mt=function(M){let nt="data-error-msg",z="data-error",Z="error-msg",q="validate",g="required",S="input",F="checkbox",H="radio",G="group",D="form",st="fieldset",w='input:not([type="button"]):not([type="search"]):not([type="reset"]):not([type="submit"]),select,textarea',L="hidden",l=(t,e)=>e?t instanceof HTMLElement&&t.matches(e):t instanceof HTMLElement,P=t=>l(t,w),O=(t,e)=>typeof t===e,m=(t,e)=>t.includes(e),rt=(t,e)=>t.querySelectorAll(e),U=t=>m([F,H,"range"],t.type),V=t=>m([F,H],t.type),T=t=>t.type===F,$=(t,e,r)=>t.addEventListener(e,r),j=(t,e)=>t.getAttribute(e),A=(t,e,r="")=>t.setAttribute(e,r),p=t=>O(t,"string")?document.getElementById(t):l(t)?t:!1,k=t=>l(p(t),D)?t:l(p(t))?t.closest(D):!1,I=t=>t.name||j(t,"id"),x=t=>String(t).trim(),E=t=>{t=p(t);let e=W[k(t)]||[];return l(t,st)?e.filter(r=>r.set===t):P(t)?e.filter(r=>r.name===I(t))[0]:e},B=t=>m(E(t).mods,"group"),K=t=>`error-msg-${t}`,N=["mmddyyyy","ddmmyyyy","yyyymmdd"],ot=/^(\d{1,2})[-/.](\d{1,2})[-/.](\d{4})$/,at=/^(\d{4})[-/.](\d{1,2})[-/.](\d{1,2})$/;function Q(t,e){let r=t.split(/[-/.]/),a=N.indexOf(e),o,i,u;ot.test(t)?(a===0&&([o,i,u]=r),a===1&&([i,o,u]=r)):at.test(t)&&a===2&&([u,o,i]=r);let y=`${u}-${o}-${i}`,n=new Date(y),s=n.getTime();return!O(s,"number")||Number.isNaN(s)?!1:n.toISOString().startsWith(y)}let W=M.reactive({}),X={};function R(t,e,r){let a=k(t),o=I(t);if(e={name:o,node:t,value:t.value,...e},l(a,D)&&o){let i=E(a);if(i.some(u=>u.name===o)){e={...E(t),...e};let u=e.value,y=!u.trim();if(r===!0&&(e.mods=[...e.mods,g],e.valid=!y&&e.valid),r===!1&&(e.mods=e.mods.filter(n=>n!==g),e.valid=y?!0:e.valid),T(t)&&!u){let n=e.array;n=n.some(s=>s===u)?n.filter(s=>s!==u):[...n,u],e.array=n,e.value=n.toString()}i=i.map(n=>n.name===o?e:n)}else i.push(e);W[a]=i}}let c={};c.email=t=>/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(x(t)),c.tel=t=>/^[+]?[(]?[0-9]{3}[)]?[-\s.]?[0-9]{3}[-\s.]?[0-9]{4,6}$/.test(x(t)),c.website=t=>/^(https?:\/\/)?(www\.)?([a-zA-Z0-9]+(-?[a-zA-Z0-9])*\.)+[\w]{2,}(\/\S*)?$/.test(x(t)),c.url=t=>/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()!@:%_+.~#?&/=]*)/.test(x(t)),c.number=t=>!isNaN(parseFloat(t))&&isFinite(t),c.integer=t=>c.number(t)&&Number.isInteger(Number(t)),c.wholenumber=t=>c.integer(t)&&Number(t)>0,c.date=t=>Q(t,N[0]),N.forEach(t=>{c.date[t]=e=>Q(e,t)});let f={};f.data=t=>E(t),f.updateData=(t,e)=>R(p(t),e),f.makeRequired=(t,e)=>R(p(t),{},e),f.isRequired=t=>m(E(t).mods,g)||p(t).hasAttribute(g),f.toggleError=(t,e)=>C(p(t),e),f.submit=t=>{E(t.target).forEach(e=>{e.valid===!1&&(C(e.node,!1),t.preventDefault(),console.error(`${e.name} not valid`))})},f.isComplete=t=>!E(t).some(e=>!e.valid),Object.keys(c).forEach(t=>f={...f,[t]:c[t]}),M.magic(q,()=>f),M.directive(q,(t,{modifiers:e,expression:r},{evaluate:a})=>{let o=k(t),i=n=>{let s=v=>m(e,g)||m(e,G)||v.hasAttribute(g)||!1;return{array:T(n)&&[],value:V(n)?"":n.value,valid:!s(n),mods:e,set:n.closest("fieldset")}};function u(n){ct(n);let s=U(n)?"click":l(n,"select")?"change":"blur";$(n,s,y),m(e,S)&&!U(n)&&$(n,S,y)}l(t,D)&&(X[o]=e,rt(t,w).forEach(s=>{R(s,i(s)),s.getAttributeNames().some(v=>m(v,"x-validate"))||u(s)})),P(t)&&(e=[...e,...X[o]||[]],R(t,i(t)),u(t));function y(n){let s=this,v=s.value.trim(),J=E(s),b=[s.type,...J.mods];s.hasAttribute(g)&&(b=[...b,g]);let d=!0,Y=r&&a(r),tt=s.checked;if(T(s)&&m(b,G)){let h=J.array.length;tt?h++:h--;let _=parseInt(Y)||1;d=h>=_}else if(d=s.checkValidity(),m(b,g)&&(!v||V(s)&&!tt)&&(d=!1),d&&v){for(let h of b)if(O(c[h],"function")){if(h==="date"){let _=b.filter(ut=>N.indexOf(ut)!==-1)[0]||N[0];d=c.date[_](v)}else d=c[h](v);break}Y===!1&&(d=!1)}return C(s,d),R(s,{value:s.value,valid:d}),!d&&!m(b,"bluronly")&&n.type==="blur"&&$(s,S,y),!d&&m(b,"refocus")&&s.focus(),d}});function C(t,e){let r=I(t),a=t.parentNode;B(t)&&(a=a.parentNode);let o=p(K(r));A(t,"aria-invalid",!e),e?(A(o,L),a.removeAttribute(z)):(o.removeAttribute(L),A(a,z,o.textContent))}function it(t){for(;t;){if(t=t.nextElementSibling,l(t,`.${Z}`))return t;if(l(t,w))return!1}return!1}function ct(t){let e=I(t),r=B(t)?t.parentNode.parentNode:t,a=document.createElement("span");a.className=Z;let o=it(r)||a,i=K(e);A(o,"id",i),A(o,L),o.innerHTML||(o.textContent=j(t,nt)||`${e.replace(/[-_]/g," ")} required`),A(t,"aria-errormessage",i),p(i)||r.after(o)}},et=mt;document.addEventListener("alpine:init",()=>{window.Alpine.plugin(et)});})();
