(()=>{var K=function(D){let j="validate",m=(t,e)=>e?t instanceof HTMLElement&&t.matches(e):t instanceof HTMLElement,C='input:not([type="button"]):not([type="search"]):not([type="reset"]):not([type="submit"]),select,textarea',I=t=>m(t,C),W=(t,e)=>typeof t===e,B=t=>t.querySelectorAll(C),k=t=>["checkbox","radio","range"].includes(t.type),H=t=>["checkbox","radio"].includes(t.type),w=t=>t.type==="checkbox",F=(t,e,n)=>t.addEventListener(e,n),S=(t,e)=>t.getAttribute(e),O=(t,e,n="")=>t.setAttribute(e,n),v=t=>W(t,"string")?document.querySelector(`#${t}`):m(t)?t:!1,x=t=>m(v(t),"form")?t:m(v(t))?t.closest("form"):!1;function G(t,e){var n=t.nextElementSibling;return!e||m(n,e)?n:!1}let q=t=>t.name||S(t,"id"),b=t=>String(t).trim(),V=t=>b(t)==="",y=t=>(t=v(t),data=M[x(t)]||[],m(t,"fieldset")?data.filter(e=>e.set===t):I(t)?data.filter(e=>e.name===q(t))[0]:data),l=["mmddyyyy","ddmmyyyy","yyyymmdd"];function h(t,e){let[n,i,a]=t.split(/[-\/.]/),o;if(e===l[0]&&/^(\d{1,2})[-\/.](\d{1,2})[-\/.](\d{4})$/.test(t))o=`${a}-${n}-${i}`;else if(e===l[1]&&/^(\d{1,2})[-\/.](\d{1,2})[-\/.](\d{4})$/.test(t))o=`${a}-${i}-${n}`;else if(e===l[2]&&/^(\d{4})[-\/.](\d{1,2})[-\/.](\d{1,2})$/.test(t))o=`${n}-${i}-${a}`;else return!1;let u=new Date(o),$=u.getTime();return typeof $!="number"||Number.isNaN($)?!1:u.toISOString().startsWith(o)}let M=D.reactive({}),A={};function N(t,e){let n=x(t),i=q(t);if(e={name:i,node:t,value:t.value,...e},m(n,"form")&&i){let a=y(n);if(a.some(o=>o.name===i)){if(e={...y(t),...e},w(t)&&!V(e.value)){let o=e.array;console.log("\u{1F680} ~ file: index.js ~ line 122 ~ updateFormData ~ tempArray",o),o=o.some(u=>u===t.value)?o.filter(u=>u!==e.value):[...o,e.value],e={...e,array:o,value:o.toString()}}a=a.map(o=>o.name===i?e:o)}else a.push(e);M[n]=a,console.log("formData",M[n])}}let s={};s.email=t=>/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(b(t)),s.tel=t=>/^[\+]?[(]?[0-9]{3}[)]?[-\s\.]?[0-9]{3}[-\s\.]?[0-9]{4,6}$/.test(b(t)),s.website=t=>/^(https?:\/\/)?(www\.)?([a-zA-Z0-9]+(-?[a-zA-Z0-9])*\.)+[\w]{2,}(\/\S*)?$/.test(b(t)),s.url=t=>/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()!@:%_\+.~#?&\/\/=]*)/.test(b(t)),s.number=t=>!isNaN(parseFloat(t))&&isFinite(t),s.integer=t=>s.number(t)&&Number.isInteger(Number(t)),s.wholenumber=t=>s.integer(t)&&Number(t)>0,s.date=t=>h(t,l[0]),s.date[l[0]]=t=>h(t,l[0]),s.date[l[1]]=t=>h(t,l[1]),s.date[l[2]]=t=>h(t,l[2]);let p={};p.data=t=>y(t),p.updateData=(t,e)=>N(v(t),e),p.toggleError=(t,e,n)=>z(v(t),e,n),p.submit=t=>{y(t.target).forEach(e=>{if(e.valid===!1){let n=e.group?{errorNode:e.node.parentNode.parentNode}:{};z(e.node,!1,n),t.preventDefault(),console.error(`${e.name} not valid`)}})},p.isComplete=t=>!y(t).some(e=>!e.valid),Object.keys(s).forEach(t=>p={...p,[t]:s[t]}),D.magic(j,()=>p),D.directive(j,(t,{modifiers:e,expression:n},{evaluate:i})=>{let a=x(t);A[a]=A[a]||[];let o=[...e,...A[a]],u=(r,f=o)=>f.includes(r),$=r=>u("required")||r.hasAttribute("required")||!1,R=(r,f)=>{let d={array:w(r)&&[],value:H(r)?"":r.value,valid:!($(r)||u("group")),mods:o};return f&&(d={...d,set:f}),d};function _(r){let f=k(r)?"click":m(r,"select")?"change":"blur";F(r,f,Z),u("input")&&!k(r)&&F(r,"input",Z)}if(m(t,"form")){A[a]=e;let r=t.querySelectorAll("fieldset");(r.length>0?r:[t]).forEach(d=>{B(d).forEach(c=>{N(c,R(c,d)),c.getAttributeNames().some(E=>E.includes("x-validate"))||_(c)})})}I(t)&&(N(t,R(t)),_(t));function Z(){let r=this,f=y(r),d=[r.type],T=f.mods;d=T?[...d,...T]:d;let c=!0;if(w(r)&&u("group",d)){let E=this,g=f.array.length;g=E.checked?g+1:g-1;let L=parseInt(n&&i(n))||1;c=g>=L}else if(c=r.checkValidity(),u("required",d)&&(V(r.value)||H(r)&&!r.checked)&&(c=!1),c){for(let g of d)if(typeof s[g]=="function"){if(g==="date"){let L=d.filter(J=>l.indexOf(J)!==-1);c=s.date[L[0]||l[0]](r.value)}else c=s[g](r.value);break}(n&&i(n))===!1&&(c=!1)}return z(r,c),N(r,{value:r.value,valid:c}),!c&&m(r,"input, textarea")&&!k(r)&&!u("bluronly")&&F(r,"input",Z),!c&&u("refocus")&&r.focus(),c}});function z(t,e,n={}){let{errorNode:i,errorMsg:a}=n,o=q(t)||"";y(t).mods.includes("group")&&(i=t.parentNode.parentNode,a=S(i,"data-error-msg")),i=i||G(t,".error-msg")||t.parentNode,a=a||S(t,"data-error-msg")||`${o} required`,e?(i.removeAttribute("data-error"),t.removeAttribute("invalid")):(O(i,"data-error",a),O(t,"invalid"))}},P=K;document.addEventListener("alpine:init",()=>{window.Alpine.plugin(P)});})();
