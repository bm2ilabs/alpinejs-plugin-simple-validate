(()=>{var T=function(S){let M="validate",z=e=>e.matches("input,textarea,select"),P=e=>e.querySelectorAll("input, select, text"),I=e=>["checkbox","radio","range"].includes(e.type),Z=e=>["checkbox","radio"].includes(e.type),q=e=>["button","reset","submit","search"].includes(e.type),m=(e,r,a)=>e.addEventListener(r,a),A=(e,r)=>e.getAttribute(r),k=e=>e.matches("form")?A(e,"id"):A(e.closest("form"),"id"),O=(e,r,a="")=>e.setAttribute(r,a),j=(e,r)=>e.removeAttribute(r);function R(e,r){var a=e.nextElementSibling;return!r||(a==null?void 0:a.matches(r))?a:!1}let w=e=>e.name||A(e,"id"),l=["mmddyyyy","ddmmyyyy","yyyymmdd"],b=e=>String(e).trim(),V=e=>b(e)==="";function D(e,r){let[a,i,n]=e.split(/[-\/.]/),u;if(r===l[0]&&/^(\d{1,2})[-\/.](\d{1,2})[-\/.](\d{4})$/.test(e))u=`${n}-${a}-${i}`;else if(r===l[1]&&/^(\d{1,2})[-\/.](\d{1,2})[-\/.](\d{4})$/.test(e))u=`${n}-${i}-${a}`;else if(r===l[2]&&/^(\d{4})[-\/.](\d{1,2})[-\/.](\d{1,2})$/.test(e))u=`${a}-${i}-${n}`;else return!1;let d=new Date(u),N=d.getTime();return typeof N!="number"||Number.isNaN(N)?!1:d.toISOString().startsWith(u)}let y=S.reactive({}),E={};function h(e,r){if(typeof e=="string"&&r.name){let a=y[e]||[];if(a.some(i=>i.name===r.name)){let i=a.filter(n=>n.name===r.name)[0];if(a=a.filter(n=>n.name!==r.name),i.type==="checkbox"){let n=i.array||[];r.value!==""&&(n=n.some(u=>u===r.value)?n.filter(u=>u!==r.value):[...n,r.value]),r={...i,...r,array:n,value:n.toString()}}else r={...i,...r}}a.push(r),y[e]=a}}let c={};c.email=e=>/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(b(e)),c.tel=e=>/^[\+]?[(]?[0-9]{3}[)]?[-\s\.]?[0-9]{3}[-\s\.]?[0-9]{4,6}$/.test(b(e)),c.website=e=>/^(https?:\/\/)?(www\.)?([a-zA-Z0-9]+(-?[a-zA-Z0-9])*\.)+[\w]{2,}(\/\S*)?$/.test(b(e)),c.url=e=>/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()!@:%_\+.~#?&\/\/=]*)/.test(b(e)),c.number=e=>Number(e),c.wholenumber=e=>Number.isInteger(Number(e))&&Number(e)>0,c.integer=e=>Number.isInteger(Number(e)),c.date=e=>D(e,l[0]),c.date[l[0]]=e=>D(e,l[0]),c.date[l[1]]=e=>D(e,l[1]),c.date[l[2]]=e=>D(e,l[2]);let f={};f.formData=e=>y[e].map(r=>Object.getOwnPropertyNames(r).reduce((a,i)=>({...a,[i]:r[i]}),{})),f.updateFormData=(e,r)=>h(e,r),f.toggleErrorMessage=(e,r,a)=>F(e,r,a),f.isFormComplete=e=>y[e].map(a=>Object.getOwnPropertyNames(a).reduce((i,n)=>({...i,[n]:a[n]}),{})).every(a=>a.valid===!0),f.submit=e=>{let r=e.target,a=k(r);y[a].forEach(i=>{if(i.valid===!1){let n=document.querySelector(`#${a} [name='${i.name}'], #${a} input#${i.name}`),u=i.group?{errorNode:n.parentNode.parentNode}:{};F(n,!1,u),e.preventDefault(),console.error(`${a}:${i.name} not valid`)}})},Object.keys(c).forEach(e=>{f={...f,[e]:c[e]}}),S.magic(M,()=>f),S.directive(M,(e,{modifiers:r,expression:a},{evaluate:i})=>{let n=k(e);E[n]=E[n]||[];let u=[...r,...E[n]],d=(t,o=u)=>o.includes(t),N=t=>d("required")||t.hasAttribute("required")||!1;function C(t){let o={name:w(t),type:t.type,value:t.value,valid:!N(t)};return t.type==="checkbox"&&(o={...o,value:"",array:[]}),t.type==="radio"&&(o={...o,value:""}),o}if(e.matches("form")){let t=P(e);E[n]=r,t.forEach(o=>{let p=o.getAttributeNames().some(s=>s.includes("x-validate"));!q(o)&&!p&&(h(n,C(o)),I(o)?m(o,"click",g):(m(o,"blur",g),d("input")&&m(o,"input",g)))})}if(z(e)&&!q(e)){let t=e,o=C(t);if(Z(t)&&d("group")){let p=function(){let s=y[n].filter(x=>x.name===t.name)[0].array.length;s=t.checked?s+1:s-1;let v=parseInt(a&&i(a))||1,$=s>=v;F(t,$,{errorNode:t.parentNode.parentNode}),h(n,{name:w(t),value:t.value,valid:$})};o={...o,valid:!1,group:!0},m(t,"click",p)}else I(t)?m(t,"click",g):(m(t,"blur",g),d("input")&&m(t,"input",g));h(k(t),o)}function g(){let t=this,o=k(t),p=[t.type];z(e)&&(p=[...p,...r]);let s=t.checkValidity();if(N(t)&&(V(t.value)||Z(t)&&!t.checked)&&(s=!1),!V(t.value)){for(let v of p)if(typeof c[v]=="function")if(v==="date"){let $=l[0];l.forEach(x=>{p.includes(x)&&($=x)}),s=s&&c.date[$](t.value);break}else{s=s&&c[v](t.value);break}z(e)&&(a&&i(a))===!1&&(s=!1)}return F(t,s),h(o,{name:w(t),value:t.value,valid:s}),!s&&t.matches("input, textarea")&&!I(t)&&!d("bluronly")&&m(t,"input",g),!s&&d("refocus")&&t.focus(),s}});function F(e,r,a={}){let{errorNode:i,errorMsg:n}=a,u=w(e)||"";i=i||R(i,".error-msg")||i.parentNode,n=n||A(e,"data-error-msg")||`${u} required`,r?(j(i,"data-error"),j(e,"invalid")):(O(i,"data-error",n),O(e,"invalid"))}},L=T;document.addEventListener("alpine:init",()=>{window.Alpine.plugin(L)});})();
