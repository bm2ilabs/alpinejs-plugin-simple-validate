(()=>{var G=function(F){let q="validate",f=(e,t)=>t?e instanceof HTMLElement&&e.matches(t):e instanceof HTMLElement,z='input:not([type="button"]):not([type="search"]):not([type="reset"]),select,textarea',M=e=>f(e,z),H=(e,t)=>typeof e===t,P=e=>e.querySelectorAll(z),Z=e=>["checkbox","radio","range"].includes(e.type),x=e=>["checkbox","radio"].includes(e.type),y=(e,t,a)=>e.addEventListener(t,a),L=(e,t)=>e.getAttribute(t),A=e=>H(e,"string")?document.querySelector(`#${e}`):f(e)?e:!1,N=e=>f(A(e),"form")?e:f(A(e))?e.closest("form"):!1,T=(e,t,a="")=>e.setAttribute(t,a);function R(e,t){var a=e.nextElementSibling;return!t||f(a,t)?a:!1}let j=e=>e.name||L(e,"id"),$=e=>String(e).trim(),I=e=>$(e)==="",d=["mmddyyyy","ddmmyyyy","yyyymmdd"];function k(e,t){let[a,o,s]=e.split(/[-\/.]/),l;if(t===d[0]&&/^(\d{1,2})[-\/.](\d{1,2})[-\/.](\d{4})$/.test(e))l=`${s}-${a}-${o}`;else if(t===d[1]&&/^(\d{1,2})[-\/.](\d{1,2})[-\/.](\d{4})$/.test(e))l=`${s}-${o}-${a}`;else if(t===d[2]&&/^(\d{4})[-\/.](\d{1,2})[-\/.](\d{1,2})$/.test(e))l=`${a}-${o}-${s}`;else return!1;let i=new Date(l),p=i.getTime();return typeof p!="number"||Number.isNaN(p)?!1:i.toISOString().startsWith(l)}let b=F.reactive({}),w={};function S(e,t){let a=N(e),o=j(e);if(t={name:o,node:e,value:e.value,...t},f(a,"form")&&o){let s=b[a]||[];if(s.some(l=>l.name===o)){let l=s.filter(i=>i.name===o)[0];if(s=s.filter(i=>i.name!==o),l.type==="checkbox"){let i=l.array||[];t.value!==""&&(i=i.some(p=>p===e.value)?i.filter(p=>p!==t.value):[...i,t.value]),t={...l,...t,array:i,value:i.toString()}}else t={...l,...t}}s.push(t),b[a]=s}}let c={};c.email=e=>/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test($(e)),c.tel=e=>/^[\+]?[(]?[0-9]{3}[)]?[-\s\.]?[0-9]{3}[-\s\.]?[0-9]{4,6}$/.test($(e)),c.website=e=>/^(https?:\/\/)?(www\.)?([a-zA-Z0-9]+(-?[a-zA-Z0-9])*\.)+[\w]{2,}(\/\S*)?$/.test($(e)),c.url=e=>/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()!@:%_\+.~#?&\/\/=]*)/.test($(e)),c.number=e=>parseFloat(e)==e,c.integer=e=>Number.isInteger(Number(e)),c.wholenumber=e=>c.integer(e)&&Number(e)>0,c.date=e=>k(e,d[0]),c.date[d[0]]=e=>k(e,d[0]),c.date[d[1]]=e=>k(e,d[1]),c.date[d[2]]=e=>k(e,d[2]);let g={};g.formData=e=>b[N(e)].map(t=>Object.getOwnPropertyNames(t).reduce((a,o)=>({...a,[o]:t[o]}),{})),g.updateFormData=(e,t)=>S(A(e),t),g.toggleErrorMessage=(e,t,a)=>D(A(e),t,a),g.submit=e=>{var t;(t=b[e.target])==null||t.forEach(a=>{if(a.valid===!1){let o=a.group?{errorNode:a.node.parentNode.parentNode}:{};D(a.node,!1,o),e.preventDefault(),console.error(`${a.name} not valid`)}})},g.isComplete=e=>(e=A(e),data=b[N(e)],f(e,"fieldset")&&(data=data==null?void 0:data.filter(t=>t.set===e)),!(data==null?void 0:data.some(t=>!t.valid))),Object.keys(c).forEach(e=>g={...g,[e]:c[e]}),F.magic(q,()=>g),F.directive(q,(e,{modifiers:t,expression:a},{evaluate:o})=>{let s=N(e);w[s]=w[s]||[];let l=[...t,...w[s]],i=(r,u=l)=>u.includes(r),p=r=>i("required")||r.hasAttribute("required")||!1;function O(r,u){let n={value:r.value,valid:!p(r)};return f(u)&&(n={...n,set:u}),x(r)&&(n={...n,value:""}),x(r)&&i("group")&&(n={...n,valid:!1,group:!0}),n}function V(r){r.type==="checkbox"&&i("group")?y(r,"click",_):Z(r)?y(r,"click",E):f(r,"select")?y(r,"change",E):(y(r,"blur",E),i("input")&&y(r,"input",E))}if(f(e,"form")){w[s]=t;let r=e.querySelectorAll("fieldset");(r.length>0?r:[e]).forEach(n=>{P(n).forEach(m=>{S(m,O(m,n)),m.getAttributeNames().some(h=>h.includes("x-validate"))||V(m)})})}M(e)&&(S(e,O(e)),V(e));function E(){let r=this,u=[r.type];M(e)&&(u=[...u,...t]);let n=r.checkValidity();if(p(r)&&(I(r.value)||x(r)&&!r.checked)&&(n=!1),!I(r.value)){for(let v of u)if(typeof c[v]=="function")if(v==="date"){let m=d[0];d.forEach(h=>{u.includes(h)&&(m=h)}),n=n&&c.date[m](r.value);break}else{n=n&&c[v](r.value);break}M(e)&&(a&&o(a))===!1&&(n=!1)}return D(r,n),S(r,{value:r.value,valid:n}),!n&&f(r,"input, textarea")&&!Z(r)&&!i("bluronly")&&y(r,"input",E),!n&&i("refocus")&&r.focus(),n}function _(){var m;let r=this,u=((m=b[N(r)].filter(h=>h.name===r.name)[0].array)==null?void 0:m.length)||0;u=r.checked?u+1:u-1;let n=parseInt(a&&o(a))||1,v=u>=n;D(r,v,{errorNode:r.parentNode.parentNode})}});function D(e,t,a={}){let{errorNode:o,errorMsg:s}=a,l=j(e)||"";o=o||R(e,".error-msg")||e.parentNode,s=s||L(e,"data-error-msg")||`${l} required`,t?(o.removeAttribute("data-error"),e.removeAttribute("invalid")):(T(o,"data-error",s),T(e,"invalid"))}},C=G;document.addEventListener("alpine:init",()=>{window.Alpine.plugin(C)});})();
