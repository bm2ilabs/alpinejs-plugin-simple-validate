(()=>{var K=function(w){let C="validate",m=(e,t)=>t?e instanceof HTMLElement&&e.matches(t):e instanceof HTMLElement,I='input:not([type="button"]):not([type="search"]):not([type="reset"]):not([type="submit"]),select,textarea',R=e=>m(e,I),W=(e,t)=>typeof e===t,B=e=>e.querySelectorAll(I),D=e=>["checkbox","radio","range"].includes(e.type),j=e=>["checkbox","radio"].includes(e.type),S=e=>e.type==="checkbox",q=(e,t,n)=>e.addEventListener(t,n),F=(e,t)=>e.getAttribute(t),H=(e,t,n="")=>e.setAttribute(t,n),b=e=>W(e,"string")?document.querySelector(`#${e}`):m(e)?e:!1,x=e=>m(b(e),"form")?e:m(b(e))?e.closest("form"):!1;function G(e,t){var n=e.nextElementSibling;return!t||m(n,t)?n:!1}let M=e=>e.name||F(e,"id"),h=e=>String(e).trim(),A=e=>h(e)==="",g=e=>{e=b(e);let t=O[x(e)]||[];return m(e,"fieldset")?t.filter(n=>n.set===e):R(e)?t.filter(n=>n.name===M(e))[0]:t},d=["mmddyyyy","ddmmyyyy","yyyymmdd"];function $(e,t){let[n,a,i]=e.split(/[-\/.]/),u;if(t===d[0]&&/^(\d{1,2})[-\/.](\d{1,2})[-\/.](\d{4})$/.test(e))u=`${i}-${n}-${a}`;else if(t===d[1]&&/^(\d{1,2})[-\/.](\d{1,2})[-\/.](\d{4})$/.test(e))u=`${i}-${a}-${n}`;else if(t===d[2]&&/^(\d{4})[-\/.](\d{1,2})[-\/.](\d{1,2})$/.test(e))u=`${n}-${a}-${i}`;else return!1;let s=new Date(u),v=s.getTime();return typeof v!="number"||Number.isNaN(v)?!1:s.toISOString().startsWith(u)}let O=w.reactive({}),E={};function N(e,t,n){let a=x(e),i=M(e);if(t={name:i,node:e,value:e.value,...t},m(a,"form")&&i){let u=g(a);if(u.some(s=>s.name===i)){if(t={...g(e),...t},n===!0&&(t.mods=[...t.mods,"required"],t.valid=!A(t.value)&&t.valid),n===!1&&(t.mods=t.mods.filter(s=>s!=="required"),t.valid=A(t.value)?!0:t.valid),n===!0&&A(t.value)&&(t.valid=!1),S(e)&&!A(t.value)){let s=t.array;s=s.some(v=>v===t.value)?s.filter(v=>v!==t.value):[...s,t.value],t={...t,array:s,value:s.toString()}}u=u.map(s=>s.name===i?t:s)}else u.push(t);O[a]=u}}let o={};o.email=e=>/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(h(e)),o.tel=e=>/^[\+]?[(]?[0-9]{3}[)]?[-\s\.]?[0-9]{3}[-\s\.]?[0-9]{4,6}$/.test(h(e)),o.website=e=>/^(https?:\/\/)?(www\.)?([a-zA-Z0-9]+(-?[a-zA-Z0-9])*\.)+[\w]{2,}(\/\S*)?$/.test(h(e)),o.url=e=>/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()!@:%_\+.~#?&\/\/=]*)/.test(h(e)),o.number=e=>!isNaN(parseFloat(e))&&isFinite(e),o.integer=e=>o.number(e)&&Number.isInteger(Number(e)),o.wholenumber=e=>o.integer(e)&&Number(e)>0,o.date=e=>$(e,d[0]),o.date[d[0]]=e=>$(e,d[0]),o.date[d[1]]=e=>$(e,d[1]),o.date[d[2]]=e=>$(e,d[2]);let f={};f.data=e=>g(e),f.updateData=(e,t)=>N(b(e),t),f.makeRequired=(e,t)=>N(b(e),{},t),f.isRequired=e=>g(e).mods.includes("required"),f.toggleError=(e,t,n)=>z(b(e),t,n),f.submit=e=>{g(e.target).forEach(t=>{if(t.valid===!1){let n=t.group?{errorNode:t.node.parentNode.parentNode}:{};z(t.node,!1,n),e.preventDefault(),console.error(`${t.name} not valid`)}})},f.isComplete=e=>!g(e).some(t=>!t.valid),Object.keys(o).forEach(e=>f={...f,[e]:o[e]}),w.magic(C,()=>f),w.directive(C,(e,{modifiers:t,expression:n},{evaluate:a})=>{let i=x(e);E[i]=E[i]||[];let u=[...t,...E[i]],s=(r,p=u)=>p.includes(r),v=r=>s("required")||r.hasAttribute("required")||!1,V=(r,p)=>{let l={array:S(r)&&[],value:j(r)?"":r.value,valid:!(v(r)||s("group")),mods:u};return p&&(l={...l,set:p}),l};function _(r){let p=D(r)?"click":m(r,"select")?"change":"blur";q(r,p,Z),s("input")&&!D(r)&&q(r,"input",Z)}if(m(e,"form")){E[i]=t;let r=e.querySelectorAll("fieldset");(r.length>0?r:[e]).forEach(l=>{B(l).forEach(c=>{N(c,V(c,l)),c.getAttributeNames().some(k=>k.includes("x-validate"))||_(c)})})}R(e)&&(N(e,V(e)),_(e));function Z(){let r=this,p=g(r),l=[r.type],T=p.mods;l=T?[...l,...T]:l;let c=!0;if(S(r)&&s("group",l)){let k=this,y=p.array.length;y=k.checked?y+1:y-1;let L=parseInt(n&&a(n))||1;c=y>=L}else if(c=r.checkValidity(),s("required",l)&&(A(r.value)||j(r)&&!r.checked)&&(c=!1),c){for(let y of l)if(typeof o[y]=="function"){if(y==="date"){let L=l.filter(J=>d.indexOf(J)!==-1);c=o.date[L[0]||d[0]](r.value)}else c=o[y](r.value);break}(n&&a(n))===!1&&(c=!1)}return z(r,c),N(r,{value:r.value,valid:c}),!c&&m(r,"input, textarea")&&!D(r)&&!s("bluronly")&&q(r,"input",Z),!c&&s("refocus")&&r.focus(),c}});function z(e,t,n={}){let{errorNode:a,errorMsg:i}=n,u=M(e)||"";g(e).mods.includes("group")&&(a=e.parentNode.parentNode,i=F(a,"data-error-msg")),a=a||G(e,".error-msg")||e.parentNode,i=i||F(e,"data-error-msg")||`${u} required`,t?(a.removeAttribute("data-error"),e.removeAttribute("invalid")):(H(a,"data-error",i),H(e,"invalid"))}},P=K;document.addEventListener("alpine:init",()=>{window.Alpine.plugin(P)});})();
